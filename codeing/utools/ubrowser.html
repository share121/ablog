<!doctype html><html data-theme="light" lang="zh-CN"><head> <meta charset="UTF-8"> <meta content="width=device-width,initial-scale=1" name="viewport"> <title>ABlog</title> <link href="../../logo.svg" rel="icon" type="image/x-icon"> <link href="../../normalize.css" rel="stylesheet"> <link href="../../github-markdown.css" rel="stylesheet"> <link href="../../github-alert.css" rel="stylesheet"> <link href="../../hljs.css" rel="stylesheet"> <link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" crossorigin="anonymous" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+"> <link href="../../index.css" rel="stylesheet"> <meta content="ABlog 是一个高性能的文档生成器" name="description"> <meta content="ABlog,文档生成器,markdown,md,html,markdown转html,md2html,blog" name="keywords"> </head> <body> <header id="header-box"> <svg class="menu-btn" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"> <title>菜单</title> <path d="M3 4h18v2H3zm0 7h18v2H3zm0 7h18v2H3z" fill="currentColor"></path> </svg> <h1 id="header"><a href="../../index.html">ABlog</a></h1> <div class="github"> <a href="https://github.com/share121/ablog" target="_blank">Github</a> </div> <svg class="random-btn" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"> <title>文章漫游</title> <path d="M5 5v14h14V5zM3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm12.5 12a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3M10 8.5a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0m2 5a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3" fill="currentColor"></path> </svg> <svg class="theme-switch sun" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"> <title>切换到深色模式</title> <path d="M12 18a6 6 0 1 1 0-12a6 6 0 0 1 0 12m0-2a4 4 0 1 0 0-8a4 4 0 0 0 0 8M11 1h2v3h-2zm0 19h2v3h-2zM3.515 4.929l1.414-1.414L7.05 5.636L5.636 7.05zM16.95 18.364l1.414-1.414l2.121 2.121l-1.414 1.414zm2.121-14.85l1.414 1.415l-2.121 2.121l-1.414-1.414zM5.636 16.95l1.414 1.414l-2.121 2.121l-1.414-1.414zM23 11v2h-3v-2zM4 11v2H1v-2z" fill="currentColor"></path> </svg> <svg class="theme-switch moon" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"> <title>切换到浅色模式</title> <path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12S6.477 2 12 2h.1A6.98 6.98 0 0 0 10 7m-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938A8 8 0 0 0 4 12" fill="currentColor"></path> </svg> </header> <div class="markdown-body" id="app"> <aside id="content"><ul><li><a href="../../grammar.html">语法</a></li><li><a href="../../second.html">第二个页面</a></li><li><a href="../../chinese/index.html">语文</a><ul><li><a href="../../chinese/梦想励志类作文.html">梦想励志类作文</a></li><li><a href="../../chinese/议论文作文.html">议论文作文</a></li><li><a href="../../chinese/真情作文.html">真情作文</a></li><li><a href="../../chinese/书体特点.html">书体特点</a></li></ul></li><li><a href="../../math/index.html">数学</a><ul><li><a href="../../math/相似三角形.html">相似三角形</a></li><li><a href="../../math/圆.html">圆</a></li><li><a href="../../math/二次函数.html">二次函数</a></li><li><a href="../../math/反比例函数.html">反比例函数</a></li></ul></li><li><a href="../../english/index.html">英语</a><ul><li><a href="../../english/定语从句.html">定语从句</a></li><li><a href="../../english/开学考笔记.html">开学考笔记</a></li><li><a href="../../english/student-times/index.html">周报</a><ul><li><a href="../../english/student-times/01.html">01</a></li><li><a href="../../english/student-times/02.html">02</a></li><li><a href="../../english/student-times/05.html">05</a></li></ul></li><li><a href="../../english/fit-english/index.html">沸腾英语</a><ul><li><a href="../../english/fit-english/06.html">06</a></li></ul></li></ul></li><li><a href="../../politics/index.html">政治</a><ul><li><a href="../../politics/九上政治提纲.html">九上政治提纲</a></li></ul></li><li><a href="../../history/index.html">历史</a><ul><li><a href="../../history/八年级下册/index.html">八年级下册</a><ul><li><a href="../../history/八年级下册/中华人民共和国成立.html">中华人民共和国成立</a></li><li><a href="../../history/八年级下册/抗美援朝.html">抗美援朝</a></li><li><a href="../../history/八年级下册/土地改革.html">土地改革</a></li><li><a href="../../history/八年级下册/新中国工业化的起步和人民代表大会制度的确立.html">新中国工业化的起步和人民代表大会制度的确立</a></li><li><a href="../../history/八年级下册/三大改造.html">三大改造</a></li><li><a href="../../history/八年级下册/艰辛探索与建设成就.html">艰辛探索与建设成就</a></li><li><a href="../../history/八年级下册/伟大的历史转折.html">伟大的历史转折</a></li><li><a href="../../history/八年级下册/经济体制改革.html">经济体制改革</a></li></ul></li></ul></li><li><a href="../../physics/index.html">物理</a><ul><li><a href="../../physics/分子热运动.html">分子热运动</a></li><li><a href="../../physics/内能.html">内能</a></li></ul></li><li><a href="../../chemistry/index.html">化学</a><ul><li><a href="../../chemistry/初识化学.html">初识化学</a></li><li><a href="../../chemistry/走进化学实验室.html">走进化学实验室</a></li><li><a href="../../chemistry/实验探究初步.html">实验探究初步</a></li><li><a href="../../chemistry/空气和氧气.html">空气和氧气</a></li><li><a href="../../chemistry/氧气的制备综合.html">氧气的制备综合</a></li><li><a href="../../chemistry/物质的变化和性质.html">物质的变化和性质</a></li><li><a href="../../chemistry/化学常用知识.html">化学常用知识</a></li></ul></li><li><a href="../../codeing/index.html">编程</a><ul><li><a href="../../codeing/html/index.html">HTML</a><ul><li><a href="../../codeing/html/HTML 语法.html">HTML 语法</a></li></ul></li><li><a href="../../codeing/javascript/index.html">JavaScript</a><ul><li><a href="../../codeing/javascript/scope 伪类.html">scope 伪类</a></li><li><a href="../../codeing/javascript/观察元素更改.html">观察元素更改</a></li><li><a href="../../codeing/javascript/修改文件访问时间、修改时间.html">修改文件访问时间、修改时间</a></li><li><a href="../../codeing/javascript/获得所有文件.html">获得所有文件</a></li><li><a href="../../codeing/javascript/获得数据类型.html">获得数据类型</a></li><li><a href="../../codeing/javascript/判断字体是否可用.html">判断字体是否可用</a></li><li><a href="../../codeing/javascript/统计中文.html">统计中文</a></li></ul></li><li><a href="../../codeing/crack/index.html">逆向</a><ul><li><a href="../../codeing/crack/无限 debugger.html">无限 debugger</a></li><li><a href="../../codeing/crack/模拟输入.html">模拟输入</a></li><li><a href="../../codeing/crack/防止强制跳转.html">防止强制跳转</a></li></ul></li><li><a href="../../codeing/python/index.html">Python</a><ul><li><a href="../../codeing/python/后台操作键鼠.html">后台操作键鼠</a></li><li><a href="../../codeing/python/OpenCV.html">OpenCV</a></li><li><a href="../../codeing/python/OpenCV_files/index.html">OpenCV_files</a><ul></ul></li></ul></li><li><a href="../../codeing/dart/index.html">Dart</a><ul><li><a href="../../codeing/dart/线程管理.html">线程管理</a></li><li><a href="../../codeing/dart/字符分割.html">字符分割</a></li></ul></li><li><a href="../../codeing/nuxtjs/index.html">NuxtJS</a><ul><li><a href="../../codeing/nuxtjs/启动项目.html">启动项目</a></li></ul></li><li><a href="../../codeing/solidjs/index.html">SolidJS</a><ul><li><a href="../../codeing/solidjs/why-solid.html">为什么选择 Solid</a></li><li><a href="../../codeing/solidjs/solid-primitives.html">Solid 基石</a></li><li><a href="../../codeing/solidjs/typescript-for-solid.html">Solid 的 TypeScript 语法</a></li></ul></li><li><a href="../../codeing/cpp/index.html">C++</a><ul><li><a href="../../codeing/cpp/basic-concepts/index.html">基本语法</a><ul><li><a href="../../codeing/cpp/basic-concepts/concepts.html">basic</a></li><li><a href="../../codeing/cpp/basic-concepts/comment.html">comment</a></li><li><a href="../../codeing/cpp/basic-concepts/ascii.html">ascii</a></li><li><a href="../../codeing/cpp/basic-concepts/punctuators.html">punctuators</a></li><li><a href="../../codeing/cpp/basic-concepts/identifiers.html">identifiers</a></li></ul></li></ul></li><li><a href="../../codeing/utools/index.html">utools</a><ul><li><a href="../../codeing/utools/welcome.html">welcome</a></li><li><a href="../../codeing/utools/config.html">config</a></li><li><a href="../../codeing/utools/preload.html">preload</a></li><li><a href="../../codeing/utools/template.html">template</a></li><li><a href="../../codeing/utools/api.html">api</a></li><li><a href="../../codeing/utools/db.html">db</a></li><li><a href="../../codeing/utools/ubrowser.html">ubrowser</a></li><li><a href="../../codeing/utools/server-api.html">server-api</a></li><li><a href="../../codeing/utools/payment.html">payment</a></li><li><a href="../../codeing/utools/best.html">best</a></li></ul></li><li><a href="../../codeing/大师课/index.html">大师课</a><ul><li><a href="../../codeing/大师课/原理 事件循环.html">原理 事件循环</a></li><li><a href="../../codeing/大师课/原理 浏览器渲染原理.html">原理 浏览器渲染原理</a></li><li><a href="../../codeing/大师课/实战 歌词滚动效果.html">实战 歌词滚动效果</a></li><li><a href="../../codeing/大师课/实战 购物车效果.html">实战 购物车效果</a></li><li><a href="../../codeing/大师课/知识 属性描述符.html">知识 属性描述符</a></li><li><a href="../../codeing/大师课/框架 Vue 从入门到手撕.html">框架 Vue 从入门到手撕</a></li></ul></li><li><a href="../../codeing/dart-tutorials/index.html">Dart 教程</a><ul><li><a href="../../codeing/dart-tutorials/variables.html">variables</a></li><li><a href="../../codeing/dart-tutorials/operators.html">operators</a></li></ul></li></ul></li><li><a href="../../technology/index.html">科技</a><ul><li><a href="../../technology/单文件制作/index.html">单文件制作</a><ul></ul></li><li><a href="../../technology/白嫖 Office 365/index.html">白嫖 Office 365</a><ul></ul></li><li><a href="../../technology/mp4-to-m3u8.html">mp4-to-m3u8</a></li><li><a href="../../technology/win11-concept-cursor/index.html">win11-concept-cursor</a><ul></ul></li><li><a href="../../technology/fira-code-font-download/index.html">fira-code-font-download</a><ul></ul></li><li><a href="../../technology/free-music/index.html">free-music</a><ul></ul></li><li><a href="../../technology/fast-download.html">fast-download</a></li><li><a href="../../technology/fiddler.html">fiddler</a></li><li><a href="../../technology/share-fanyi.html">share-fanyi</a></li><li><a href="../../technology/misans-font-download.html">misans-font-download</a></li><li><a href="../../technology/update-chrome-plugin.html">update-chrome-plugin</a></li></ul></li><li><a href="../../团校笔记/index.html">团校笔记</a><ul><li><a href="../../团校笔记/01.html">01</a></li><li><a href="../../团校笔记/02.html">02</a></li><li><a href="../../团校笔记/03.html">03</a></li><li><a href="../../团校笔记/04.html">04</a></li><li><a href="../../团校笔记/05.html">05</a></li><li><a href="../../团校笔记/06.html">06</a></li><li><a href="../../团校笔记/07.html">07</a></li></ul></li><li><a href="../../信息技术/index.html">信息技术</a><ul><li><a href="../../信息技术/动画制作初步.html">动画制作初步</a></li><li><a href="../../信息技术/信息与信息处理.html">信息与信息处理</a></li><li><a href="../../信息技术/数据的分析与处理.html">数据的分析与处理</a></li><li><a href="../../信息技术/制作多媒体作品.html">制作多媒体作品</a></li><li><a href="../../信息技术/程序设计初步.html">程序设计初步</a></li><li><a href="../../信息技术/网络基础及应用.html">网络基础及应用</a></li><li><a href="../../信息技术/App Inventor 手机积木式编程.html">App Inventor 手机积木式编程</a></li></ul></li><li><a href="../../大师课/index.html">大师课</a><ul><li><a href="../../大师课/原理-事件循环.html">原理-事件循环</a></li></ul></li></ul></aside> <main class="markdown-body" id="main"> <h1 id="ubrowser-api" tabindex="-1">ubrowser API <a href="#ubrowser-api" class="header-anchor">#</a></h1> <p>uTools browser 简称 ubrowser，是根据 uTools 的特性，量身打造的一个可编程浏览器。利用 ubrowser 可以轻而易举连接一切互联网服务，且与 uTools 完美结合。</p> <p>ubrowser 拥有优雅的链式调用接口，可以用口语化的数行代码，实现一系列匪夷所思的操作。例如：</p> <p>1、RPA 自动化脚本</p> <p>2、网页魔改</p> <p>3、网页抓取</p> <p>基本 demo：</p> <pre><code class="hljs lang-js"><span class="hljs-comment">// 打开"必应" 并搜索 "uTools"</span>
utools.<span class="hljs-property">ubrowser</span>
  .<span class="function_ hljs-title">goto</span>(<span class="hljs-string">"https://cn.bing.com"</span>)
  .<span class="function_ hljs-title">value</span>(<span class="hljs-string">"#sb_form_q"</span>, <span class="hljs-string">"uTools"</span>)
  .<span class="function_ hljs-title">click</span>(<span class="hljs-string">"#sb_form_go"</span>)
  .<span class="function_ hljs-title">run</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">600</span> });
</code></pre> <h2 id="api-列表" tabindex="-1">API 列表 <a href="#api-列表" class="header-anchor">#</a></h2> <h3 id="useragentuseragent" tabindex="-1"><code>useragent(userAgent)</code> <a href="#useragentuseragent" class="header-anchor">#</a></h3> <ul> <li><code>userAgent</code> String</li> </ul> <blockquote> <p>设置 User-Agent</p> </blockquote> <h3 id="gotourl-headers-timeout" tabindex="-1"><code>goto(url, headers, timeout)</code> <a href="#gotourl-headers-timeout" class="header-anchor">#</a></h3> <ul> <li> <p><code>url</code> String</p> </li> <li> <p><code>headers</code> Object (可选)</p> <blockquote> <p>{ Referer: string, userAgent: string }</p> </blockquote> </li> <li> <p><code>timeout</code> Integer (可选)</p> <blockquote> <p>超时 默认 60000 ms</p> </blockquote> </li> </ul> <blockquote> <p>前往</p> </blockquote> <h3 id="viewportwidth-height" tabindex="-1"><code>viewport(width, height)</code> <a href="#viewportwidth-height" class="header-anchor">#</a></h3> <ul> <li><code>width</code> Integer</li> <li><code>height</code> Integer</li> </ul> <blockquote> <p>页面大小</p> </blockquote> <h3 id="hide" tabindex="-1"><code>hide()</code> <a href="#hide" class="header-anchor">#</a></h3> <blockquote> <p>隐藏 ubrowser 窗口</p> </blockquote> <h3 id="show" tabindex="-1"><code>show()</code> <a href="#show" class="header-anchor">#</a></h3> <blockquote> <p>显示 ubrowser 窗口</p> </blockquote> <h3 id="csscsscode" tabindex="-1"><code>css(cssCode)</code> <a href="#csscsscode" class="header-anchor">#</a></h3> <ul> <li><code>cssCode</code> String</li> </ul> <blockquote> <p>注入样式</p> </blockquote> <h3 id="presskey-modifier" tabindex="-1"><code>press(key, ...modifier)</code> <a href="#presskey-modifier" class="header-anchor">#</a></h3> <ul> <li> <p><code>key</code> String</p> </li> <li> <p><code>modifier</code> String (可选)</p> <blockquote> <p>ctrl | shift | alt | meta</p> </blockquote> </li> </ul> <blockquote> <p>键盘按键</p> </blockquote> <h3 id="pastetext" tabindex="-1"><code>paste(text)</code> <a href="#pastetext" class="header-anchor">#</a></h3> <ul> <li> <p><code>text</code> String (可选)</p> <blockquote> <p>文本字符串 | 图片 base64</p> </blockquote> </li> </ul> <blockquote> <p>执行粘贴</p> </blockquote> <h3 id="screenshotarg-savepath" tabindex="-1"><code>screenshot(arg, savePath)</code> <a href="#screenshotarg-savepath" class="header-anchor">#</a></h3> <ul> <li><code>arg</code> String | Object (可选)</li> </ul> <blockquote> <p>String - 要截取的 DOM 元素</p> </blockquote> <blockquote> <p>Object - 截图位置和大小 { x: Integer, y: Integer, width: Integer, height: Integer }</p> </blockquote> <blockquote> <p>为空 截取整个窗口</p> </blockquote> <ul> <li> <p><code>savePath</code> String (可选)</p> <blockquote> <p>图片保存路径,，也可以是完整 PNG 文件路径（默认存储在临时目录）</p> </blockquote> </li> </ul> <blockquote> <p>部分网页截图</p> </blockquote> <h3 id="pdfoptions-savepath" tabindex="-1"><code>pdf(options, savePath)</code> <a href="#pdfoptions-savepath" class="header-anchor">#</a></h3> <ul> <li> <p><code>options</code> Object (可选)</p> <blockquote> <p>{ marginsType: 0 | 1 | 2, pageSize: (‘A3’ | ‘A4’ | ‘A5’ | ‘Legal’ | ‘Letter’ | ‘Tabloid’) | { width: Integer, height: Integer } }</p> <p>与 <a href="https://www.electronjs.org/docs/api/web-contents#contentsprinttopdfoptions" target="_blank">Electron APIopen in new window</a> 一致</p> </blockquote> </li> <li> <p><code>savePath</code> String (可选)</p> <blockquote> <p>图片保存路径，也可以是完整 pdf 文件路径（默认存储在临时目录）</p> </blockquote> </li> </ul> <blockquote> <p>保存页面为 PDF</p> </blockquote> <h3 id="devicearg" tabindex="-1"><code>device(arg)</code> <a href="#devicearg" class="header-anchor">#</a></h3> <ul> <li> <p><code>arg</code> String | Object</p> <blockquote> <p>String - ‘iPhone 11’ | ‘iPhone X’ | ‘iPad’ | ‘iPhone 6/7/8 Plus’ | ‘iPhone 6/7/8’ | ‘iPhone 5/SE’ | ‘HUAWEI Mate10’ | ‘HUAWEI Mate20’ | ‘HUAWEI Mate30’ | ‘HUAWEI Mate30 Pro’</p> </blockquote> <blockquote> <p>Object - { size: { width: Integer, height: Integer }, useragent: String }</p> </blockquote> </li> </ul> <blockquote> <p>模拟设备</p> </blockquote> <h3 id="cookiesname" tabindex="-1"><code>cookies(name)</code> <a href="#cookiesname" class="header-anchor">#</a></h3> <ul> <li><code>name</code> String (可选)</li> </ul> <blockquote> <p>为空获取全部 cookie 获取 cookie</p> </blockquote> <h3 id="setcookiesname-value" tabindex="-1"><code>setCookies(name, value)</code> <a href="#setcookiesname-value" class="header-anchor">#</a></h3> <ul> <li><code>name</code> String</li> <li><code>value</code> String</li> </ul> <blockquote> <p>设置 cookie</p> </blockquote> <h3 id="setcookiescookies" tabindex="-1"><code>setCookies(cookies)</code> <a href="#setcookiescookies" class="header-anchor">#</a></h3> <ul> <li> <p><code>cookies</code> Array</p> <blockquote> <p>[{ name: String, value: String }, { name: String1, value: String1 }]</p> </blockquote> </li> </ul> <blockquote> <p>设置 cookie</p> </blockquote> <h3 id="removecookiesname" tabindex="-1"><code>removeCookies(name)</code> <a href="#removecookiesname" class="header-anchor">#</a></h3> <ul> <li><code>name</code> String</li> </ul> <blockquote> <p>删除 cookie</p> </blockquote> <h3 id="clearcookiesurl" tabindex="-1"><code>clearCookies(url)</code> <a href="#clearcookiesurl" class="header-anchor">#</a></h3> <ul> <li> <p><code>url</code> String (可选)</p> <blockquote> <p>如果在执行"goto"前执行 url 参数必需</p> </blockquote> </li> </ul> <blockquote> <p>清空 cookie</p> </blockquote> <h3 id="devtoolsmode" tabindex="-1"><code>devTools(mode)</code> <a href="#devtoolsmode" class="header-anchor">#</a></h3> <ul> <li> <p><code>mode</code> String (可选)</p> <blockquote> <p>‘right’ | ‘bottom’ | ‘undocked’ | ‘detach’ 默认为 ‘detach’</p> </blockquote> </li> </ul> <blockquote> <p>打开开发者工具</p> </blockquote> <h3 id="evaluatefunc-params" tabindex="-1"><code>evaluate(func, ...params)</code> <a href="#evaluatefunc-params" class="header-anchor">#</a></h3> <ul> <li> <p><code>func</code> Function</p> <blockquote> <p>在网页内执行的函数</p> </blockquote> </li> <li> <p><code>param</code> Any (可选)</p> <blockquote> <p>传递给 func 的参数</p> </blockquote> </li> </ul> <blockquote> <p>执行 JS 函数，如果有返回值将加入到返回结果中</p> </blockquote> <h4 id="示例" tabindex="-1">示例 <a href="#示例" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="function_ hljs-title">evaluate</span>(
  <span class="hljs-function">(<span class="hljs-params">param1, param2</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="function_ hljs-title">querySelector</span>(<span class="hljs-string">"div"</span>).<span class="hljs-property">innerText</span>;
  },
  <span class="hljs-string">"param1"</span>,
  <span class="hljs-string">"param2"</span>
);
</code></pre> <h3 id="waitms" tabindex="-1"><code>wait(ms)</code> <a href="#waitms" class="header-anchor">#</a></h3> <ul> <li> <p><code>ms</code> Integer</p> <blockquote> <p>等待的毫秒数</p> </blockquote> </li> </ul> <blockquote> <p>等待</p> </blockquote> <h3 id="waitselector-timeout" tabindex="-1"><code>wait(selector, timeout)</code> <a href="#waitselector-timeout" class="header-anchor">#</a></h3> <ul> <li> <p><code>selector</code> String</p> <blockquote> <p>DOM 元素</p> </blockquote> </li> <li> <p><code>timeout</code> Integer (可选)</p> <blockquote> <p>超时 默认 60000 ms</p> </blockquote> </li> </ul> <blockquote> <p>等待 DOM 元素出现</p> </blockquote> <h3 id="waitfunc-timeoutparams" tabindex="-1"><code>wait(func, timeout，...params)</code> <a href="#waitfunc-timeoutparams" class="header-anchor">#</a></h3> <ul> <li> <p><code>func</code> Function</p> <blockquote> <p>在网页内执行的函数，返回 true 结束等待</p> </blockquote> </li> <li> <p><code>timeout</code> Integer (可选)</p> <blockquote> <p>超时 默认 60000 ms</p> </blockquote> </li> <li> <p><code>param</code> Any (可选)</p> <blockquote> <p>传递给 func 的参数</p> </blockquote> </li> </ul> <blockquote> <p>等待 JS 函数执行返回 true</p> </blockquote> <h3 id="whenselector" tabindex="-1"><code>when(selector)</code> <a href="#whenselector" class="header-anchor">#</a></h3> <ul> <li> <p><code>selector</code> String</p> <blockquote> <p>DOM 元素</p> </blockquote> </li> </ul> <blockquote> <p>当元素存在时执行直到碰到 end() 方法</p> </blockquote> <h3 id="whenfunc-params" tabindex="-1"><code>when(func, ...params)</code> <a href="#whenfunc-params" class="header-anchor">#</a></h3> <ul> <li> <p><code>func</code> Function</p> <blockquote> <p>在网页内执行的函数，返回 true 执行</p> </blockquote> </li> <li> <p><code>param</code> Any (可选)</p> <blockquote> <p>传递给 func 的参数</p> </blockquote> </li> </ul> <blockquote> <p>当 JS 函数执行返回 true 时执行, 直到碰到 end() 方法</p> </blockquote> <h3 id="end" tabindex="-1"><code>end()</code> <a href="#end" class="header-anchor">#</a></h3> <blockquote> <p>与 when 配套使用</p> </blockquote> <h3 id="clickselector" tabindex="-1"><code>click(selector)</code> <a href="#clickselector" class="header-anchor">#</a></h3> <ul> <li><code>selector</code> String</li> </ul> <blockquote> <p>单击元素</p> </blockquote> <h3 id="mousedownselector" tabindex="-1"><code>mousedown(selector)</code> <a href="#mousedownselector" class="header-anchor">#</a></h3> <ul> <li><code>selector</code> String</li> </ul> <blockquote> <p>元素触发按下鼠标左键</p> </blockquote> <h3 id="mouseupselector" tabindex="-1"><code>mouseup(selector)</code> <a href="#mouseupselector" class="header-anchor">#</a></h3> <ul> <li><code>selector</code> String</li> </ul> <blockquote> <p>元素触发释放鼠标左键</p> </blockquote> <h3 id="fileselector-payload" tabindex="-1"><code>file(selector, payload)</code> <a href="#fileselector-payload" class="header-anchor">#</a></h3> <ul> <li> <p><code>selector</code> String</p> <blockquote> <p>input type=‘file’ 元素</p> </blockquote> </li> <li> <p><code>payload</code> String | Array | Buffer</p> <blockquote> <p>文件路径 或 路径集合 或 文件 Buffer</p> </blockquote> </li> </ul> <blockquote> <p>为网页中的 file input 赋值</p> </blockquote> <h3 id="valueselector-val" tabindex="-1"><code>value(selector, val)</code> <a href="#valueselector-val" class="header-anchor">#</a></h3> <ul> <li> <p><code>selector</code> String</p> <blockquote> <p>input textarea select 元素</p> </blockquote> </li> <li> <p><code>val</code> String</p> </li> </ul> <blockquote> <p>为网页中的 input textarea select 元素赋值</p> </blockquote> <h3 id="checkselector-checked" tabindex="-1"><code>check(selector, checked)</code> <a href="#checkselector-checked" class="header-anchor">#</a></h3> <ul> <li> <p><code>selector</code> String</p> <blockquote> <p>checkbox radio 元素</p> </blockquote> </li> <li> <p><code>checked</code> Boolean</p> <blockquote> <p>是否选中</p> </blockquote> </li> </ul> <blockquote> <p>checkbox radio 元素选中或取消选中</p> </blockquote> <h3 id="focusselector" tabindex="-1"><code>focus(selector)</code> <a href="#focusselector" class="header-anchor">#</a></h3> <ul> <li><code>selector</code> String</li> </ul> <blockquote> <p>元素获得焦点</p> </blockquote> <h3 id="scrollselector" tabindex="-1"><code>scroll(selector)</code> <a href="#scrollselector" class="header-anchor">#</a></h3> <ul> <li><code>selector</code> String</li> </ul> <blockquote> <p>滚动到元素位置</p> </blockquote> <h3 id="scrolly" tabindex="-1"><code>scroll(y)</code> <a href="#scrolly" class="header-anchor">#</a></h3> <ul> <li><code>y</code> Integer</li> </ul> <blockquote> <p>Y 轴滚动</p> </blockquote> <h3 id="scrollx-y" tabindex="-1"><code>scroll(x, y)</code> <a href="#scrollx-y" class="header-anchor">#</a></h3> <ul> <li><code>x</code> Integer</li> <li><code>y</code> Integer</li> </ul> <blockquote> <p>X 轴和 Y 轴滚动</p> </blockquote> <h3 id="downloadurl-savepath" tabindex="-1"><code>download(url, savePath)</code> <a href="#downloadurl-savepath" class="header-anchor">#</a></h3> <ul> <li> <p><code>url</code> String</p> <blockquote> <p>下载文件的 URL</p> </blockquote> </li> <li> <p><code>savePath</code> String (可选)</p> <blockquote> <p>保存路径(保存所在文件夹或文件绝对路径)</p> </blockquote> </li> </ul> <blockquote> <p>文件下载</p> </blockquote> <h3 id="runoptions" tabindex="-1"><code>run(options)</code> <a href="#runoptions" class="header-anchor">#</a></h3> <ul> <li> <p><code>options</code> Object</p> <ul> <li><code>Object</code> <ul> <li>show Boolean (可选) 是否显示</li> <li>width Integer (可选) 宽度 默认为 800</li> <li>height Integer (可选) 高度 默认为 600</li> <li>x Integer (可选) 位置 X</li> <li>y Integer (可选) 位置 Y</li> <li>center Boolean (可选) 窗口在屏幕居中</li> <li>minWidth Integer (可选) 窗口的最小宽度。默认值为 0</li> <li>minHeight Integer (可选) 窗口的最小高度。默认值为 0</li> <li>maxWidth Integer (可选) 窗口的最大宽度。默认无限制</li> <li>maxHeight Integer (可选) 窗口的最大高度。默认无限制</li> <li>resizable Boolean (可选) 窗口是否可以改变尺寸。默认值为 true</li> <li>movable Boolean (可选) 窗口是否可以移动，在 Linux 中无效。默认值为 true</li> <li>minimizable Boolean (可选) 窗口是否可以最小化，在 Linux 中无效。默认值为 true</li> <li>maximizable Boolean (可选) 窗口是否可以最大化动，在 Linux 中无效。默认值为 true</li> <li>alwaysOnTop Boolean (可选) 窗口是否永远置顶。默认值为 false</li> <li>fullscreen Boolean (可选) 窗口是否全屏。默认值为 false</li> <li>fullscreenable Boolean (可选) 窗口是否可以进入全屏状态。默认值为 true</li> <li>enableLargerThanScreen Boolean (可选) 是否允许改变窗口的大小使之大于屏幕的尺寸，仅适用于 macOS，因为其它操作系统默认允许 大于屏幕的窗口。 默认值为 false</li> <li>opacity Number (可选) 设置窗口初始的不透明度，介于 0.0 (完全透明) 和 1.0 (完全不透明) 之间。仅支持 Windows 和 macOS 。</li> </ul> </li> </ul> </li> <li> <p><code>返回</code> Promise</p> </li> </ul> <blockquote> <p>启动 ubrowser 运行实例</p> </blockquote> <h3 id="runubrowserid" tabindex="-1"><code>run(ubrowserId)</code> <a href="#runubrowserid" class="header-anchor">#</a></h3> <ul> <li> <p><code>ubrowserId</code> Integer</p> <blockquote> <ol> <li>run(options) 运行结束后, 当 ubrowser 实例窗口仍然显示时返回</li> <li>utools.getIdleUBrowsers() 中获得</li> </ol> </blockquote> </li> <li> <p><code>返回</code> Promise</p> </li> </ul> <blockquote> <p>运行在闲置状态(已运行结束，未关闭)的 ubrowser 实例上</p> </blockquote> <h2 id="ubrowser-管理" tabindex="-1">ubrowser 管理 <a href="#ubrowser-管理" class="header-anchor">#</a></h2> <h3 id="getidleubrowsers" tabindex="-1"><code>getIdleUBrowsers()</code> <a href="#getidleubrowsers" class="header-anchor">#</a></h3> <ul> <li><code>返回</code> Array</li> </ul> <blockquote> <p>获取闲置的 ubrowser</p> </blockquote> <h4 id="示例-1" tabindex="-1">示例 <a href="#示例-1" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(utools.<span class="function_ hljs-title">getIdleUBrowsers</span>());
<span class="hljs-comment">// [{ id: number, title: string, url: string, x: number, y: number, width: number, height: number }]</span>
</code></pre> <h3 id="setubrowserproxyconfig" tabindex="-1"><code>setUBrowserProxy(config)</code> <a href="#setubrowserproxyconfig" class="header-anchor">#</a></h3> <ul> <li> <p><code>config</code> Object</p> <blockquote> <p>与 <a href="https://www.electronjs.org/docs/api/session#sessetproxyconfig" target="_blank">Electron APIopen in new window</a> 一致</p> </blockquote> </li> <li> <p><code>返回</code> Boolean</p> </li> </ul> <blockquote> <p>设置 ubrowser 代理</p> </blockquote> <h4 id="示例-2" tabindex="-1">示例 <a href="#示例-2" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">setUBrowserProxy</span>({
  <span class="hljs-attr">proxyRules</span>: <span class="hljs-string">"http=foopy:80;ftp=foopy2"</span>,
});
</code></pre> <h3 id="clearubrowsercache" tabindex="-1"><code>clearUBrowserCache()</code> <a href="#clearubrowsercache" class="header-anchor">#</a></h3> <ul> <li><code>返回</code> Boolean</li> </ul> <blockquote> <p>清空 ubrowser 缓存</p> </blockquote> <h4 id="示例-3" tabindex="-1">示例 <a href="#示例-3" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">clearUBrowserCache</span>();
</code></pre> <hr> <div class="light-comments"> <script async="" crossorigin="anonymous" data-category="Announcements" data-category-id="DIC_kwDOMaY3rc4ChNfY" data-emit-metadata="0" data-input-position="top" data-lang="zh-CN" data-loading="lazy" data-mapping="pathname" data-reactions-enabled="1" data-repo="share121/ablog" data-repo-id="R_kgDOMaY3rQ" data-strict="0" data-theme="light" src="https://giscus.app/client.js"></script> </div> <div class="dark-comments"> <script async="" crossorigin="anonymous" data-category="Announcements" data-category-id="DIC_kwDOMaY3rc4ChNfY" data-emit-metadata="0" data-input-position="top" data-lang="zh-CN" data-loading="lazy" data-mapping="pathname" data-reactions-enabled="1" data-repo="share121/ablog" data-repo-id="R_kgDOMaY3rQ" data-strict="0" data-theme="dark" src="https://giscus.app/client.js"></script> </div> </main> <aside id="toc"><nav class="table-of-contents"><ol><li><a href="#ubrowser-api">ubrowser API </a><ol><li><a href="#api-列表">API 列表 </a><ol><li><a href="#useragentuseragent">useragent(userAgent) </a></li><li><a href="#gotourl-headers-timeout">goto(url, headers, timeout) </a></li><li><a href="#viewportwidth-height">viewport(width, height) </a></li><li><a href="#hide">hide() </a></li><li><a href="#show">show() </a></li><li><a href="#csscsscode">css(cssCode) </a></li><li><a href="#presskey-modifier">press(key, ...modifier) </a></li><li><a href="#pastetext">paste(text) </a></li><li><a href="#screenshotarg-savepath">screenshot(arg, savePath) </a></li><li><a href="#pdfoptions-savepath">pdf(options, savePath) </a></li><li><a href="#devicearg">device(arg) </a></li><li><a href="#cookiesname">cookies(name) </a></li><li><a href="#setcookiesname-value">setCookies(name, value) </a></li><li><a href="#setcookiescookies">setCookies(cookies) </a></li><li><a href="#removecookiesname">removeCookies(name) </a></li><li><a href="#clearcookiesurl">clearCookies(url) </a></li><li><a href="#devtoolsmode">devTools(mode) </a></li><li><a href="#evaluatefunc-params">evaluate(func, ...params) </a><ol><li><a href="#示例">示例 </a></li></ol></li><li><a href="#waitms">wait(ms) </a></li><li><a href="#waitselector-timeout">wait(selector, timeout) </a></li><li><a href="#waitfunc-timeoutparams">wait(func, timeout，...params) </a></li><li><a href="#whenselector">when(selector) </a></li><li><a href="#whenfunc-params">when(func, ...params) </a></li><li><a href="#end">end() </a></li><li><a href="#clickselector">click(selector) </a></li><li><a href="#mousedownselector">mousedown(selector) </a></li><li><a href="#mouseupselector">mouseup(selector) </a></li><li><a href="#fileselector-payload">file(selector, payload) </a></li><li><a href="#valueselector-val">value(selector, val) </a></li><li><a href="#checkselector-checked">check(selector, checked) </a></li><li><a href="#focusselector">focus(selector) </a></li><li><a href="#scrollselector">scroll(selector) </a></li><li><a href="#scrolly">scroll(y) </a></li><li><a href="#scrollx-y">scroll(x, y) </a></li><li><a href="#downloadurl-savepath">download(url, savePath) </a></li><li><a href="#runoptions">run(options) </a></li><li><a href="#runubrowserid">run(ubrowserId) </a></li></ol></li><li><a href="#ubrowser-管理">ubrowser 管理 </a><ol><li><a href="#getidleubrowsers">getIdleUBrowsers() </a><ol><li><a href="#示例-1">示例 </a></li></ol></li><li><a href="#setubrowserproxyconfig">setUBrowserProxy(config) </a><ol><li><a href="#示例-2">示例 </a></li></ol></li><li><a href="#clearubrowsercache">clearUBrowserCache() </a><ol><li><a href="#示例-3">示例 </a></li></ol></li></ol></li></ol></li></ol></nav></aside> </div> <script>function debounce(e,t){let o=null;return function(){clearTimeout(o),o=setTimeout(()=>{e.apply(this,arguments)},t)}}let lightQuery=window.matchMedia("(prefers-color-scheme:light)");function getRandomInt(e,t){e=Math.ceil(e),t=Math.floor(t);return Math.floor(Math.random()*(t-e)+e)}lightQuery.addEventListener("change",e=>{localStorage.getItem("theme")||(document.documentElement.dataset.theme=["dark","light"][+e.matches])}),window.matchMedia("(max-width: 960px)").addEventListener("change",e=>{document.querySelector("#content").classList.remove("open")}),localStorage.getItem("theme")?"dark"===localStorage.getItem("theme")&&(document.documentElement.dataset.theme="dark"):document.documentElement.dataset.theme=["dark","light"][+lightQuery.matches],location.hash&&document.querySelector(decodeURIComponent(location.hash))?document.querySelector(decodeURIComponent(location.hash)).scrollIntoView():document.querySelector("#main").scrollTop=+(localStorage.getItem("scroll-top-"+location.pathname)??0),document.querySelector("#main").style.scrollBehavior="smooth",document.querySelector("#content").scrollTop=+(localStorage.getItem("content-scroll-top")??0),document.querySelectorAll(".theme-switch").forEach(e=>e.addEventListener("click",e=>{"dark"===document.documentElement.dataset.theme?(lightQuery.matches?localStorage.removeItem("theme"):localStorage.setItem("theme","light"),document.documentElement.dataset.theme="light"):(lightQuery.matches?localStorage.setItem("theme","dark"):localStorage.removeItem("theme"),document.documentElement.dataset.theme="dark")})),document.querySelector(".random-btn").addEventListener("click",e=>{var t=document.querySelectorAll("#content a");t[getRandomInt(0,t.length)].click()}),document.querySelector("#main").addEventListener("scroll",debounce(e=>{localStorage.setItem("scroll-top-"+location.pathname,e.target.scrollTop)},100)),document.querySelector("#content").addEventListener("scroll",debounce(e=>{localStorage.setItem("content-scroll-top",e.target.scrollTop)},100)),document.querySelector(".menu-btn").addEventListener("click",()=>{document.querySelector("#content").classList.toggle("open")})</script> <script type="module"> import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
      mermaid.initialize({
        securityLevel: "loose",
        theme: "default",
        startOnLoad: false,
      });
      await mermaid.run({ querySelector: ".mermaid-light" });
      mermaid.initialize({
        securityLevel: "loose",
        theme: "dark",
        startOnLoad: false,
      });
      await mermaid.run({ querySelector: ".mermaid-dark" });
      document
        .querySelectorAll(".mermaid")
        .forEach((e) => e.classList.add("init")); </script> </body></html>