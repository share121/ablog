<!doctype html> <html data-theme="light" lang="zh-CN"> <head> <meta charset="UTF-8"> <meta content="width=device-width,initial-scale=1" name="viewport"> <title>uTools API</title> <link href="../../logo.svg" rel="icon" type="image/x-icon"> <link href="../../normalize.css" rel="stylesheet"> <link href="../../github-markdown.css" rel="stylesheet"> <link href="../../github-alert.css" rel="stylesheet"> <link href="../../hljs.css" rel="stylesheet"> <link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" crossorigin="anonymous" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+"> <link href="../../index.css" rel="stylesheet"> <meta content="ABlog 是一个高性能的文档生成器" name="description"> <meta content="ABlog,文档生成器,markdown,md,html,markdown转html,md2html,blog" name="keywords"> </head> <body> <header id="header-box"> <svg class="menu-btn" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"> <title>菜单</title> <path d="M3 4h18v2H3zm0 7h18v2H3zm0 7h18v2H3z" fill="currentColor"/> </svg> <h1 id="header"><a href="../../index.html">ABlog</a></h1> <div class="github"> <a href="https://github.com/share121/ablog">Github</a> </div> <svg class="random-btn" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"> <title>文章漫游</title> <path d="M5 5v14h14V5zM3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm12.5 12a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3M10 8.5a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0m2 5a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3" fill="currentColor"/> </svg> <svg class="theme-switch sun" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"> <title>切换到深色模式</title> <path d="M12 18a6 6 0 1 1 0-12a6 6 0 0 1 0 12m0-2a4 4 0 1 0 0-8a4 4 0 0 0 0 8M11 1h2v3h-2zm0 19h2v3h-2zM3.515 4.929l1.414-1.414L7.05 5.636L5.636 7.05zM16.95 18.364l1.414-1.414l2.121 2.121l-1.414 1.414zm2.121-14.85l1.414 1.415l-2.121 2.121l-1.414-1.414zM5.636 16.95l1.414 1.414l-2.121 2.121l-1.414-1.414zM23 11v2h-3v-2zM4 11v2H1v-2z" fill="currentColor"/> </svg> <svg class="theme-switch moon" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"> <title>切换到浅色模式</title> <path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12S6.477 2 12 2h.1A6.98 6.98 0 0 0 10 7m-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938A8 8 0 0 0 4 12" fill="currentColor"/> </svg> </header> <div class="markdown-body" id="app"> <aside id="content"><nav><ul><li><a href="../../grammar.html">语法</a></li><li><a href="../../second.html">第二个页面</a></li><li><a href="../../chinese/index.html">语文</a><ul><li><a href="../../chinese/梦想励志类作文.html">梦想励志类作文</a></li><li><a href="../../chinese/议论文作文.html">议论文作文</a></li><li><a href="../../chinese/真情作文.html">真情作文</a></li><li><a href="../../chinese/书体特点.html">书体特点</a></li></ul></li><li><a href="../../math/index.html">数学</a><ul><li><a href="../../math/相似三角形.html">相似三角形</a></li><li><a href="../../math/圆.html">圆</a></li><li><a href="../../math/二次函数.html">二次函数</a></li><li><a href="../../math/反比例函数.html">反比例函数</a></li></ul></li><li><a href="../../english/index.html">英语</a><ul><li><a href="../../english/定语从句.html">定语从句</a></li><li><a href="../../english/开学考笔记.html">开学考笔记</a></li><li><a href="../../english/student-times/index.html">周报</a><ul><li><a href="../../english/student-times/01.html">01</a></li><li><a href="../../english/student-times/02.html">02</a></li><li><a href="../../english/student-times/05.html">05</a></li></ul></li><li><a href="../../english/fit-english/index.html">沸腾英语</a><ul><li><a href="../../english/fit-english/06.html">06</a></li></ul></li></ul></li><li><a href="../../politics/index.html">政治</a><ul><li><a href="../../politics/九上政治提纲.html">九上政治提纲</a></li></ul></li><li><a href="../../history/index.html">历史</a><ul><li><a href="../../history/八年级下册/index.html">八年级下册</a><ul><li><a href="../../history/八年级下册/中华人民共和国成立.html">中华人民共和国成立</a></li><li><a href="../../history/八年级下册/抗美援朝.html">抗美援朝</a></li><li><a href="../../history/八年级下册/土地改革.html">土地改革</a></li><li><a href="../../history/八年级下册/新中国工业化的起步和人民代表大会制度的确立.html">新中国工业化的起步和人民代表大会制度的确立</a></li><li><a href="../../history/八年级下册/三大改造.html">三大改造</a></li><li><a href="../../history/八年级下册/艰辛探索与建设成就.html">艰辛探索与建设成就</a></li><li><a href="../../history/八年级下册/伟大的历史转折.html">伟大的历史转折</a></li><li><a href="../../history/八年级下册/经济体制改革.html">经济体制改革</a></li></ul></li></ul></li><li><a href="../../physics/index.html">物理</a><ul><li><a href="../../physics/分子热运动.html">分子热运动</a></li><li><a href="../../physics/内能.html">内能</a></li></ul></li><li><a href="../../chemistry/index.html">化学</a><ul><li><a href="../../chemistry/初识化学.html">初识化学</a></li><li><a href="../../chemistry/走进化学实验室.html">走进化学实验室</a></li><li><a href="../../chemistry/实验探究初步.html">实验探究初步</a></li><li><a href="../../chemistry/空气和氧气.html">空气和氧气</a></li><li><a href="../../chemistry/氧气的制备综合.html">氧气的制备综合</a></li><li><a href="../../chemistry/物质的变化和性质.html">物质的变化和性质</a></li><li><a href="../../chemistry/化学常用知识.html">化学常用知识</a></li></ul></li><li><a href="../../codeing/index.html">编程</a><ul><li><a href="../../codeing/html/index.html">HTML</a><ul><li><a href="../../codeing/html/HTML 语法.html">HTML 语法</a></li></ul></li><li><a href="../../codeing/javascript/index.html">JavaScript</a><ul><li><a href="../../codeing/javascript/scope 伪类.html">scope 伪类</a></li><li><a href="../../codeing/javascript/观察元素更改.html">观察元素更改</a></li><li><a href="../../codeing/javascript/修改文件访问时间、修改时间.html">修改文件访问时间、修改时间</a></li><li><a href="../../codeing/javascript/获得所有文件.html">获得所有文件</a></li><li><a href="../../codeing/javascript/获得数据类型.html">获得数据类型</a></li><li><a href="../../codeing/javascript/判断字体是否可用.html">判断字体是否可用</a></li><li><a href="../../codeing/javascript/统计中文.html">统计中文</a></li></ul></li><li><a href="../../codeing/crack/index.html">逆向</a><ul><li><a href="../../codeing/crack/无限 debugger.html">无限 debugger</a></li><li><a href="../../codeing/crack/模拟输入.html">模拟输入</a></li><li><a href="../../codeing/crack/防止强制跳转.html">防止强制跳转</a></li></ul></li><li><a href="../../codeing/python/index.html">Python</a><ul><li><a href="../../codeing/python/后台操作键鼠.html">后台操作键鼠</a></li><li><a href="../../codeing/python/OpenCV.html">OpenCV</a></li><li><a href="../../codeing/python/OpenCV_files/index.html">OpenCV_files</a><ul></ul></li></ul></li><li><a href="../../codeing/dart/index.html">Dart</a><ul><li><a href="../../codeing/dart/线程管理.html">线程管理</a></li><li><a href="../../codeing/dart/字符分割.html">字符分割</a></li></ul></li><li><a href="../../codeing/nuxtjs/index.html">NuxtJS</a><ul><li><a href="../../codeing/nuxtjs/启动项目.html">启动项目</a></li></ul></li><li><a href="../../codeing/solidjs/index.html">SolidJS</a><ul><li><a href="../../codeing/solidjs/why-solid.html">为什么选择 Solid</a></li><li><a href="../../codeing/solidjs/solid-primitives.html">Solid 基石</a></li><li><a href="../../codeing/solidjs/typescript-for-solid.html">Solid 的 TypeScript 语法</a></li></ul></li><li><a href="../../codeing/cpp/index.html">C++</a><ul><li><a href="../../codeing/cpp/basic-concepts/index.html">基本语法</a><ul><li><a href="../../codeing/cpp/basic-concepts/concepts.html">basic</a></li><li><a href="../../codeing/cpp/basic-concepts/comment.html">comment</a></li><li><a href="../../codeing/cpp/basic-concepts/ascii.html">ascii</a></li><li><a href="../../codeing/cpp/basic-concepts/punctuators.html">punctuators</a></li><li><a href="../../codeing/cpp/basic-concepts/identifiers.html">identifiers</a></li></ul></li></ul></li><li><a href="../../codeing/utools/index.html">utools</a><ul><li><a href="../../codeing/utools/welcome.html">welcome</a></li><li><a href="../../codeing/utools/config.html">config</a></li><li><a href="../../codeing/utools/preload.html">preload</a></li><li><a href="../../codeing/utools/template.html">template</a></li><li><a href="../../codeing/utools/api.html">api</a></li><li><a href="../../codeing/utools/db.html">db</a></li><li><a href="../../codeing/utools/ubrowser.html">ubrowser</a></li><li><a href="../../codeing/utools/server-api.html">server-api</a></li><li><a href="../../codeing/utools/payment.html">payment</a></li><li><a href="../../codeing/utools/best.html">best</a></li></ul></li><li><a href="../../codeing/大师课/index.html">大师课</a><ul><li><a href="../../codeing/大师课/原理 事件循环.html">原理 事件循环</a></li><li><a href="../../codeing/大师课/原理 浏览器渲染原理.html">原理 浏览器渲染原理</a></li><li><a href="../../codeing/大师课/实战 歌词滚动效果.html">实战 歌词滚动效果</a></li><li><a href="../../codeing/大师课/实战 购物车效果.html">实战 购物车效果</a></li><li><a href="../../codeing/大师课/知识 属性描述符.html">知识 属性描述符</a></li><li><a href="../../codeing/大师课/框架 Vue 从入门到手撕.html">框架 Vue 从入门到手撕</a></li></ul></li><li><a href="../../codeing/dart-tutorials/index.html">Dart 教程</a><ul><li><a href="../../codeing/dart-tutorials/variables.html">variables</a></li><li><a href="../../codeing/dart-tutorials/operators.html">operators</a></li></ul></li></ul></li><li><a href="../../technology/index.html">科技</a><ul><li><a href="../../technology/单文件制作/index.html">单文件制作</a><ul></ul></li><li><a href="../../technology/白嫖 Office 365/index.html">白嫖 Office 365</a><ul></ul></li><li><a href="../../technology/mp4-to-m3u8.html">mp4-to-m3u8</a></li><li><a href="../../technology/win11-concept-cursor/index.html">win11-concept-cursor</a><ul></ul></li><li><a href="../../technology/fira-code-font-download/index.html">fira-code-font-download</a><ul></ul></li><li><a href="../../technology/free-music/index.html">free-music</a><ul></ul></li><li><a href="../../technology/fast-download.html">fast-download</a></li><li><a href="../../technology/fiddler.html">fiddler</a></li><li><a href="../../technology/share-fanyi.html">share-fanyi</a></li><li><a href="../../technology/misans-font-download.html">misans-font-download</a></li><li><a href="../../technology/update-chrome-plugin.html">update-chrome-plugin</a></li></ul></li><li><a href="../../团校笔记/index.html">团校笔记</a><ul><li><a href="../../团校笔记/01.html">01</a></li><li><a href="../../团校笔记/02.html">02</a></li><li><a href="../../团校笔记/03.html">03</a></li><li><a href="../../团校笔记/04.html">04</a></li><li><a href="../../团校笔记/05.html">05</a></li><li><a href="../../团校笔记/06.html">06</a></li><li><a href="../../团校笔记/07.html">07</a></li></ul></li><li><a href="../../信息技术/index.html">信息技术</a><ul><li><a href="../../信息技术/动画制作初步.html">动画制作初步</a></li><li><a href="../../信息技术/信息与信息处理.html">信息与信息处理</a></li><li><a href="../../信息技术/数据的分析与处理.html">数据的分析与处理</a></li><li><a href="../../信息技术/制作多媒体作品.html">制作多媒体作品</a></li><li><a href="../../信息技术/程序设计初步.html">程序设计初步</a></li><li><a href="../../信息技术/网络基础及应用.html">网络基础及应用</a></li><li><a href="../../信息技术/App Inventor 手机积木式编程.html">App Inventor 手机积木式编程</a></li></ul></li><li><a href="../../大师课/index.html">大师课</a><ul><li><a href="../../大师课/原理-事件循环.html">原理-事件循环</a></li></ul></li></ul></nav></aside> <main class="markdown-body" id="main"> <html><head></head><body><h1 id="utools-api" tabindex="-1">uTools API <a href="#utools-api" class="header-anchor">#</a></h1> <p>在插件应用初始化完成时，uTools 会自动在你的 window 对象上挂载 utools 对象。</p> <h2 id="事件" tabindex="-1">事件 <a href="#事件" class="header-anchor">#</a></h2> <p>你可以根据需要，事先定义好一些回调函数，uTools 会在事件产生时主动调用它们。</p> <h3 id="onpluginentercallback" tabindex="-1"><code>onPluginEnter(callback)</code> <a href="#onpluginentercallback" class="header-anchor">#</a></h3> <ul> <li> <p><code>callback</code> Function</p> <ul> <li> <p><code>Object</code></p> <ul> <li> <p><code>code</code> String</p> <blockquote> <p>plugin.json 配置的 feature.code</p> </blockquote> </li> <li> <p><code>type</code> String</p> <blockquote> <p>plugin.json 配置的 feature.cmd.type，可以为 “text”、“img”、 “files”、 “regex”、 “over”、“window”</p> </blockquote> </li> <li> <p><code>payload</code> String | Object | Array</p> <blockquote> <p>feature.cmd.type 对应匹配的数据</p> </blockquote> </li> <li> <p><code>option</code> undefined | Object</p> <blockquote> <p>feature.mainPush 设置为 ture ，且当用户选择 onMainPush 返回的选项进入时</p> </blockquote> </li> </ul> </li> </ul> </li> </ul> <blockquote> <p>进入插件应用时，uTools 将会主动调用这个方法。</p> </blockquote> <h4 id="示例" tabindex="-1">示例 <a href="#示例" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">onPluginEnter</span>(<span class="hljs-function">(<span class="hljs-params">{ code, type, payload, option }</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-string">"用户进入插件应用"</span>, code, type, payload);
});

<span class="hljs-comment">/*
type 为 "files" 时， payload 值示例
[
	{
		"isFile": true,
		"isDirectory": false,
		"name": "demo.js",
		"path": "C:\\demo.js"
	}
]

type 为 "window" 时， payload 值示例
{
	"id": 264584,
	"class": "Chrome_WidgetWin_1",
	"title": "demo",
	"x": -8,
	"y": -8,
	"width": 1936,
	"height": 1056,
	"appPath": "C:\\demo.exe",
	"pid": 232,
	"app": "demo.exe"
}

type 为 "img" 时， payload 值示例
data:image/png;base64,...

type 为 "text"、"regex"、 "over" 时， payload 值为进入插件应用时的主输入框文本
*/</span>
</code></pre> <h3 id="onmainpushcallback-selectcallback" tabindex="-1"><code>onMainPush(callback, selectCallback)</code> <a href="#onmainpushcallback-selectcallback" class="header-anchor">#</a></h3> <ul> <li> <p><code>callback</code> Function</p> <ul> <li> <p><code>Object</code></p> <ul> <li> <p><code>code</code> String</p> <blockquote> <p>plugin.json 配置的 feature.code</p> </blockquote> </li> <li> <p><code>type</code> String</p> <blockquote> <p>plugin.json 配置的 feature.cmd.type，可以为 “text”、“img”、 “files”、 “regex”、 “over”、“window”</p> </blockquote> </li> <li> <p><code>payload</code> String | Object | Array</p> <blockquote> <p>feature.cmd.type 对应匹配的数据</p> </blockquote> </li> </ul> </li> <li> <p><code>返回</code> Array</p> <blockquote> <p>返回内容，协议如下 [{ icon: ‘图标.png’, text: ‘文本内容’, title: ‘鼠标移动到选项时显示的提示’ }, …]</p> </blockquote> </li> </ul> </li> <li> <p><code>selectCallback</code> Function</p> <ul> <li> <p><code>Object</code></p> <ul> <li> <p><code>code</code> String</p> <blockquote> <p>plugin.json 配置的 feature.code</p> </blockquote> </li> <li> <p><code>type</code> String</p> <blockquote> <p>plugin.json 配置的 feature.cmd.type，可以为 “text”、“img”、 “files”、 “regex”、 “over”、“window”</p> </blockquote> </li> <li> <p><code>payload</code> String | Object | Array</p> <blockquote> <p>feature.cmd.type 对应匹配的数据</p> </blockquote> </li> <li> <p><code>option</code> Object</p> <blockquote> <p>callback 中返回的列表其中选项</p> </blockquote> </li> </ul> </li> <li> <p><code>返回</code> undefined | Boolean</p> <blockquote> <p>返回 true 表示进入插件应用</p> </blockquote> </li> </ul> </li> </ul> <blockquote> <p>向搜索面板推送消息(需要 feature.mainPush 设置为 true)</p> </blockquote> <h4 id="示例-1" tabindex="-1">示例 <a href="#示例-1" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-keyword">function</span> <span class="function_ hljs-title">callback</span>(<span class="hljs-params">{ code, type, payload }</span>) {
  <span class="hljs-keyword">return</span> [
    {
      <span class="hljs-attr">icon</span>: <span class="hljs-string">"icon.png"</span>,
      <span class="hljs-attr">text</span>: <span class="hljs-string">"选项1"</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-string">"help text"</span>,
    },
    {
      <span class="hljs-attr">text</span>: <span class="hljs-string">"选项2"</span>,
      <span class="hljs-attr">anyField</span>: <span class="hljs-string">"xxxx"</span>,
    },
  ];
}
<span class="hljs-keyword">function</span> <span class="function_ hljs-title">selectCallback</span>(<span class="hljs-params">{ code, type, payload, option }</span>) {
  <span class="hljs-keyword">if</span> (option.<span class="hljs-property">xxx</span>) {
    <span class="hljs-comment">// 返回 true 表示需要进入插件应用处理</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  <span class="hljs-comment">// 不进入插件应用 "执行粘贴文本"</span>
  utools.<span class="function_ hljs-title">hideMainWindowPasteText</span>(option.<span class="hljs-property">text</span>);
}
utools.<span class="function_ hljs-title">onMainPush</span>(callback, selectCallback);
</code></pre> <h3 id="onpluginoutcallback" tabindex="-1"><code>onPluginOut(callback)</code> <a href="#onpluginoutcallback" class="header-anchor">#</a></h3> <ul> <li> <p><code>callback</code> Function</p> <ul> <li> <p><code>processExit</code> Boolean</p> <blockquote> <p>是否完全退出插件应用</p> </blockquote> </li> </ul> </li> </ul> <blockquote> <p>插件应用退出时，uTools 将会主动调用这个方法。</p> </blockquote> <h4 id="示例-2" tabindex="-1">示例 <a href="#示例-2" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">onPluginOut</span>(<span class="hljs-function">(<span class="hljs-params">processExit</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (processExit) {
    <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-string">"插件应用完全退出"</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-string">"插件应用隐藏后台"</span>);
  }
});
</code></pre> <h3 id="onplugindetachcallback" tabindex="-1"><code>onPluginDetach(callback)</code> <a href="#onplugindetachcallback" class="header-anchor">#</a></h3> <ul> <li><code>callback</code> Function</li> </ul> <blockquote> <p>用户对插件应用进行分离操作时，uTools 将会主动调用这个方法。</p> </blockquote> <h4 id="示例-3" tabindex="-1">示例 <a href="#示例-3" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">onPluginDetach</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-string">"插件应用已作为系统窗口使用"</span>);
});
</code></pre> <h3 id="ondbpullcallback" tabindex="-1"><code>onDbPull(callback)</code> <a href="#ondbpullcallback" class="header-anchor">#</a></h3> <ul> <li><code>callback</code> Function</li> </ul> <blockquote> <p>当此插件应用的数据在其他设备上被更改后同步到此设备时，uTools 将会主动调用这个方法</p> </blockquote> <h4 id="示例-4" tabindex="-1">示例 <a href="#示例-4" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">onDbPull</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-string">"onDbPull"</span>);
});
</code></pre> <h2 id="窗口交互" tabindex="-1">窗口交互 <a href="#窗口交互" class="header-anchor">#</a></h2> <h3 id="hidemainwindowisrestoreprewindow" tabindex="-1"><code>hideMainWindow(isRestorePreWindow)</code> <a href="#hidemainwindowisrestoreprewindow" class="header-anchor">#</a></h3> <ul> <li> <p><code>isRestorePreWindow</code> Boolean</p> <blockquote> <p>是否焦点回归到前面的活动窗口，默认 true</p> </blockquote> </li> <li> <p><code>返回</code> Boolean</p> </li> </ul> <blockquote> <p>执行该方法将会隐藏 uTools 主窗口，包括此时正在主窗口运行的插件应用，分离的插件应用不会被隐藏。</p> </blockquote> <h4 id="示例-5" tabindex="-1">示例 <a href="#示例-5" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">hideMainWindow</span>();
</code></pre> <h3 id="showmainwindow" tabindex="-1"><code>showMainWindow()</code> <a href="#showmainwindow" class="header-anchor">#</a></h3> <ul> <li><code>返回</code> Boolean</li> </ul> <blockquote> <p>执行该方法将会显示 uTools 主窗口，包括此时正在主窗口运行的插件应用。</p> </blockquote> <h4 id="示例-6" tabindex="-1">示例 <a href="#示例-6" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">showMainWindow</span>();
</code></pre> <h3 id="setexpendheightheight" tabindex="-1"><code>setExpendHeight(height)</code> <a href="#setexpendheightheight" class="header-anchor">#</a></h3> <ul> <li><code>height</code> Integer</li> <li><code>返回</code> Boolean</li> </ul> <blockquote> <p>执行该方法将会修改插件应用窗口的高度。</p> </blockquote> <h4 id="示例-7" tabindex="-1">示例 <a href="#示例-7" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">setExpendHeight</span>(<span class="hljs-number">100</span>);
</code></pre> <h3 id="setsubinputonchange-placeholder-isfocus" tabindex="-1"><code>setSubInput(onChange, placeholder, isFocus)</code> <a href="#setsubinputonchange-placeholder-isfocus" class="header-anchor">#</a></h3> <ul> <li> <p><code>onChange</code> Function</p> <ul> <li><code>Object</code> <ul> <li><code>text</code> String</li> </ul> </li> </ul> <blockquote> <p>子输入框文本修改时触发</p> </blockquote> </li> <li> <p><code>placeholder</code> String (可选)</p> <blockquote> <p>子输入框占位符</p> </blockquote> </li> <li> <p><code>isFocus</code> Boolean (可选)</p> <blockquote> <p>子输入框是否获得焦点，默认 true</p> </blockquote> </li> <li> <p><code>返回</code> Boolean</p> </li> </ul> <blockquote> <p>设置子输入框，进入插件应用后，原本 uTools 的搜索条主输入框将会变成子输入框，子输入框可以为插件应用所使用。</p> </blockquote> <p><img alt="main.png" loading="lazy" src="https://res.u-tools.cn/website/main.png"></p> <p>主输入框</p> <p><img alt="main.png" loading="lazy" src="https://res.u-tools.cn/website/subInput.png"></p> <p>子输入框</p> <h4 id="示例-8" tabindex="-1">示例 <a href="#示例-8" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">setSubInput</span>(<span class="hljs-function">(<span class="hljs-params">{ text }</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(text);
}, <span class="hljs-string">"搜索"</span>);
</code></pre> <h3 id="removesubinput" tabindex="-1"><code>removeSubInput()</code> <a href="#removesubinput" class="header-anchor">#</a></h3> <ul> <li><code>返回</code> Boolean</li> </ul> <blockquote> <p>移除已经设置的子输入框，在插件应用切换到其他页面时可以重新设置子输入框为其所用。</p> </blockquote> <h4 id="示例-9" tabindex="-1">示例 <a href="#示例-9" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">removeSubInput</span>();
</code></pre> <h3 id="setsubinputvaluevalue" tabindex="-1"><code>setSubInputValue(value)</code> <a href="#setsubinputvaluevalue" class="header-anchor">#</a></h3> <ul> <li><code>value</code> String</li> <li><code>返回</code> Boolean</li> </ul> <blockquote> <p>直接对子输入框的值进行设置。</p> </blockquote> <h4 id="示例-10" tabindex="-1">示例 <a href="#示例-10" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">setSubInputValue</span>(<span class="hljs-string">"uTools"</span>);
</code></pre> <h3 id="subinputfocus" tabindex="-1"><code>subInputFocus()</code> <a href="#subinputfocus" class="header-anchor">#</a></h3> <ul> <li><code>返回</code> Boolean</li> </ul> <blockquote> <p>子输入框获得焦点</p> </blockquote> <h4 id="示例-11" tabindex="-1">示例 <a href="#示例-11" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">subInputFocus</span>();
</code></pre> <h3 id="subinputselect" tabindex="-1"><code>subInputSelect()</code> <a href="#subinputselect" class="header-anchor">#</a></h3> <ul> <li><code>返回</code> Boolean</li> </ul> <blockquote> <p>子输入框获得焦点并选中</p> </blockquote> <h4 id="示例-12" tabindex="-1">示例 <a href="#示例-12" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">subInputSelect</span>();
</code></pre> <h3 id="subinputblur" tabindex="-1"><code>subInputBlur()</code> <a href="#subinputblur" class="header-anchor">#</a></h3> <ul> <li><code>返回</code> Boolean</li> </ul> <blockquote> <p>子输入框失去焦点，插件应用获得焦点</p> </blockquote> <h4 id="示例-13" tabindex="-1">示例 <a href="#示例-13" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">subInputBlur</span>();
</code></pre> <h3 id="outplugin" tabindex="-1"><code>outPlugin()</code> <a href="#outplugin" class="header-anchor">#</a></h3> <ul> <li><code>返回</code> Boolean</li> </ul> <blockquote> <p>执行该方法将会退出当前插件应用。（插件应用进入后台，进程并未结束）</p> </blockquote> <h4 id="示例-14" tabindex="-1">示例 <a href="#示例-14" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">outPlugin</span>();
</code></pre> <h3 id="redirectlabel-payload" tabindex="-1"><code>redirect(label, payload)</code> <a href="#redirectlabel-payload" class="header-anchor">#</a></h3> <ul> <li> <p><code>label</code> Array | String</p> <blockquote> <p>Array[0]: 插件应用名称，Array[1]: 功能关键字 | 功能关键字</p> </blockquote> </li> <li> <p><code>payload</code> String | Object</p> </li> <li> <p><code>返回</code> Boolean</p> </li> </ul> <blockquote> <p>该方法可以携带数据，跳转到另一个插件应用进行处理，如果用户未安装对应的插件应用将引导进入插件应用市场下载。</p> </blockquote> <h4 id="示例-15" tabindex="-1">示例 <a href="#示例-15" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-comment">// 跳转到插件应用「聚合翻译」并翻译内容</span>
utools.<span class="function_ hljs-title">redirect</span>([<span class="hljs-string">"聚合翻译"</span>, <span class="hljs-string">"翻译"</span>], <span class="hljs-string">"hello world"</span>);

<span class="hljs-comment">// 找到 “翻译” 关键字，并自动跳转到对应插件应用</span>
utools.<span class="function_ hljs-title">redirect</span>(<span class="hljs-string">"翻译"</span>, <span class="hljs-string">"hello world"</span>);

<span class="hljs-comment">// 跳转到插件应用「OCR 文字识别」并识别图片中文字</span>
utools.<span class="function_ hljs-title">redirect</span>([<span class="hljs-string">"OCR 文字识别"</span>, <span class="hljs-string">"OCR 文字识别"</span>], {
  <span class="hljs-attr">type</span>: <span class="hljs-string">"img"</span>,
  <span class="hljs-attr">data</span>: <span class="hljs-string">"data:image/png;base64,"</span>, <span class="hljs-comment">// base64</span>
});

<span class="hljs-comment">// 跳转到插件应用「JSON 编辑器」查看 Json 文件</span>
utools.<span class="function_ hljs-title">redirect</span>([<span class="hljs-string">"JSON 编辑器"</span>, <span class="hljs-string">"Json"</span>], {
  <span class="hljs-attr">type</span>: <span class="hljs-string">"files"</span>,
  <span class="hljs-attr">data</span>: <span class="hljs-string">"/path/test.json"</span>, <span class="hljs-comment">// 支持数组</span>
});
</code></pre> <h3 id="showopendialogoptions" tabindex="-1"><code>showOpenDialog(options)</code> <a href="#showopendialogoptions" class="header-anchor">#</a></h3> <ul> <li> <p><code>options</code> Object</p> <blockquote> <p>与 <a href="https://www.electronjs.org/docs/api/dialog#dialogshowopendialogsyncbrowserwindow-options">Electron API dialog.showOpenDialogSyncopen in new window</a> options 一致</p> </blockquote> </li> <li> <p><code>返回</code> Array | undefined</p> <blockquote> <p>返回选择的文件数组，用户取消返回 undefined</p> </blockquote> </li> </ul> <blockquote> <p>弹出文件选择框</p> </blockquote> <h4 id="示例-16" tabindex="-1">示例 <a href="#示例-16" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">showOpenDialog</span>({
  <span class="hljs-attr">filters</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"plugin.json"</span>, <span class="hljs-attr">extensions</span>: [<span class="hljs-string">"json"</span>] }],
  <span class="hljs-attr">properties</span>: [<span class="hljs-string">"openFile"</span>],
});
</code></pre> <h3 id="showsavedialogoptions" tabindex="-1"><code>showSaveDialog(options)</code> <a href="#showsavedialogoptions" class="header-anchor">#</a></h3> <ul> <li> <p><code>options</code> Object</p> <blockquote> <p>与 <a href="https://www.electronjs.org/docs/api/dialog#dialogshowsavedialogsyncbrowserwindow-options">Electron API dialog.showSaveDialogSyncopen in new window</a> options 一致</p> </blockquote> </li> <li> <p><code>返回</code> String | undefined</p> <blockquote> <p>返回选择的路径，用户取消返回 undefined</p> </blockquote> </li> </ul> <blockquote> <p>弹出文件保存框</p> </blockquote> <h4 id="示例-17" tabindex="-1">示例 <a href="#示例-17" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">showSaveDialog</span>({
  <span class="hljs-attr">title</span>: <span class="hljs-string">"保存位置"</span>,
  <span class="hljs-attr">defaultPath</span>: utools.<span class="function_ hljs-title">getPath</span>(<span class="hljs-string">"downloads"</span>),
  <span class="hljs-attr">buttonLabel</span>: <span class="hljs-string">"保存"</span>,
});
</code></pre> <h3 id="findinpagetext-options" tabindex="-1"><code>findInPage(text, options)</code> <a href="#findinpagetext-options" class="header-anchor">#</a></h3> <ul> <li> <p><code>text</code> String</p> <blockquote> <p>要搜索的内容(必填)</p> </blockquote> </li> <li> <p><code>options</code> Object (可选)</p> <blockquote> <p>与 <a href="https://www.electronjs.org/docs/api/web-contents#contentsfindinpagetext-options">Electron API contentsfindinpagetext-optionsopen in new window</a> options 一致</p> </blockquote> </li> </ul> <blockquote> <p>插件应用页面中查找内容</p> </blockquote> <h4 id="示例-18" tabindex="-1">示例 <a href="#示例-18" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">findInPage</span>(<span class="hljs-string">"utools"</span>);
</code></pre> <h3 id="stopfindinpageaction" tabindex="-1"><code>stopFindInPage(action)</code> <a href="#stopfindinpageaction" class="header-anchor">#</a></h3> <ul> <li> <p><code>action</code> String</p> <blockquote> <p>“clearSelection” | “keepSelection” | “activateSelection”, 默认 “clearSelection”</p> <p>与 <a href="https://www.electronjs.org/docs/api/web-contents#contentsstopfindinpageaction">Electron API contentsstopfindinpageactionopen in new window</a> 一致</p> </blockquote> </li> </ul> <blockquote> <p>停止插件应用页面中查找</p> </blockquote> <h4 id="示例-19" tabindex="-1">示例 <a href="#示例-19" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">stopFindInPage</span>();
</code></pre> <h3 id="startdragfile" tabindex="-1"><code>startDrag(file)</code> <a href="#startdragfile" class="header-anchor">#</a></h3> <ul> <li> <p><code>file</code> String | Array</p> <blockquote> <p>文件路径 或 文件路径集合</p> </blockquote> </li> </ul> <blockquote> <p>原生拖拽文件到其他窗口</p> </blockquote> <h4 id="示例-20" tabindex="-1">示例 <a href="#示例-20" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">startDrag</span>(<span class="hljs-string">"/path/to/file"</span>);
</code></pre> <h3 id="createbrowserwindowurl-options-callback" tabindex="-1"><code>createBrowserWindow(url, options, callback)</code> <a href="#createbrowserwindowurl-options-callback" class="header-anchor">#</a></h3> <ul> <li> <p><code>url</code> String</p> <blockquote> <p>相对路径的 html 文件</p> </blockquote> </li> <li> <p><code>options</code> Object</p> <blockquote> <p>与 <a href="https://www.electronjs.org/docs/api/browser-window#new-browserwindowoptions">Electron API new BrowserWindowopen in new window</a> 参数一样，注意：preload 需配置相对位置</p> </blockquote> </li> <li> <p><code>callback</code> Function (可选)</p> <blockquote> <p><code>url</code> 加载完成时回调</p> </blockquote> </li> <li> <p><code>返回</code> Object</p> <blockquote> <p>返回 uTools API 构建的 <a href="https://www.electronjs.org/docs/api/browser-window">BrowserWindowopen in new window</a> 对象。 <em>保留了大部分实例方法</em></p> </blockquote> </li> </ul> <blockquote> <p>创建浏览器窗口</p> </blockquote> <h4 id="示例-21" tabindex="-1">示例 <a href="#示例-21" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-keyword">const</span> ubWindow = utools.<span class="function_ hljs-title">createBrowserWindow</span>(
  <span class="hljs-string">"test.html"</span>,
  {
    <span class="hljs-attr">show</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">title</span>: <span class="hljs-string">"测试窗口"</span>,
    <span class="hljs-attr">webPreferences</span>: {
      <span class="hljs-attr">preload</span>: <span class="hljs-string">"preload.js"</span>,
    },
  },
  <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// 显示</span>
    ubWindow.<span class="function_ hljs-title">show</span>();
    <span class="hljs-comment">// 置顶</span>
    ubWindow.<span class="function_ hljs-title">setAlwaysOnTop</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-comment">// 窗口全屏</span>
    ubWindow.<span class="function_ hljs-title">setFullScreen</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-comment">// 向子窗口传递数据</span>
    ubWindow.<span class="hljs-property">webContents</span>.<span class="function_ hljs-title">send</span>(<span class="hljs-string">"ping"</span>);
    <span class="hljs-built_in">require</span>(<span class="hljs-string">"electron"</span>).<span class="hljs-property">ipcRenderer</span>.<span class="function_ hljs-title">sendTo</span>(ubWindow.<span class="hljs-property">webContents</span>.<span class="hljs-property">id</span>, <span class="hljs-string">"ping"</span>);
    <span class="hljs-comment">// 执行脚本</span>
    ubWindow
      .<span class="function_ hljs-title">executeJavaScript</span>(
        <span class="hljs-string">'fetch("https://jsonplaceholder.typicode.com/users/1").then(resp =&gt; resp.json())'</span>
      )
      .<span class="function_ hljs-title">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(result); <span class="hljs-comment">// Will be the JSON object from the fetch call</span>
      });
  }
);
<span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(ubWindow);
</code></pre> <pre><code class="hljs lang-js"><span class="hljs-comment">// 在新建窗口 JavaScript 中接收父窗口传递过来的数据</span>
<span class="hljs-keyword">const</span> { ipcRenderer } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"electron"</span>);
ipcRenderer.<span class="function_ hljs-title">on</span>(<span class="hljs-string">"ping"</span>, <span class="hljs-function">(<span class="hljs-params">event, data</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(event);
  <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(data);
});
</code></pre> <h3 id="isdarkcolors" tabindex="-1"><code>isDarkColors()</code> <a href="#isdarkcolors" class="header-anchor">#</a></h3> <blockquote> <p>是否深色模式</p> </blockquote> <h4 id="示例-22" tabindex="-1">示例 <a href="#示例-22" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">onPluginEnter</span>(<span class="hljs-function">(<span class="hljs-params">{ code, type, payload }</span>) =&gt;</span> {
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">className</span> = utools.<span class="function_ hljs-title">isDarkColors</span>() ? <span class="hljs-string">"dark-mode"</span> : <span class="hljs-string">""</span>;
});
</code></pre> <h2 id="动态增减功能" tabindex="-1">动态增减功能 <a href="#动态增减功能" class="header-anchor">#</a></h2> <p>很多时候，插件应用中会提供一些功能供用户进行个性化设置（例如：<strong>网页快开</strong> 插件应用），这部分配置无法在 <code>plugin.json</code> 事先定义好，所以我们提供了以下方法对插件应用功能进行动态增减。</p> <h3 id="getfeaturescodes" tabindex="-1"><code>getFeatures(codes)</code> <a href="#getfeaturescodes" class="header-anchor">#</a></h3> <ul> <li> <p><code>codes</code> Array (可选)</p> <blockquote> <p>为空，获取所有</p> </blockquote> </li> <li> <p><code>返回</code> Array</p> </li> </ul> <blockquote> <p>获取插件应用动态创建的功能。</p> </blockquote> <pre><code class="hljs lang-js"><span class="hljs-comment">// 获取所有动态功能</span>
<span class="hljs-keyword">const</span> features = utools.<span class="function_ hljs-title">getFeatures</span>();
<span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(features);
<span class="hljs-comment">// 获取特定 code</span>
<span class="hljs-keyword">const</span> features = utools.<span class="function_ hljs-title">getFeatures</span>([<span class="hljs-string">"code-1"</span>, <span class="hljs-string">"code-2"</span>]);
<span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(features);
</code></pre> <h3 id="setfeaturefeature" tabindex="-1"><code>setFeature(feature)</code> <a href="#setfeaturefeature" class="header-anchor">#</a></h3> <ul> <li> <p><code>feature</code> Object</p> <blockquote> <p>格式与 <code>plugin.json</code> 中配置的格式一致</p> </blockquote> <ul> <li><code>code</code> String</li> <li><code>explain</code> String</li> <li><code>icon</code> String (可选)</li> <li><code>platform</code> Array (可选)</li> <li><code>cmds</code> Array</li> </ul> </li> <li> <p><code>返回</code> Boolean</p> </li> </ul> <blockquote> <p>为本插件应用动态新增某个功能。</p> </blockquote> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">setFeature</span>({
  <span class="hljs-attr">code</span>: <span class="hljs-string">"hosts"</span>,
  <span class="hljs-attr">explain</span>: <span class="hljs-string">"hosts切换"</span>,
  <span class="hljs-comment">// "icon": "res/xxx.png",</span>
  <span class="hljs-comment">// "icon": "data:image/png;base64,xxx...",</span>
  <span class="hljs-comment">// "platform": ["win32", "darwin", "linux"]</span>
  <span class="hljs-attr">cmds</span>: [<span class="hljs-string">"hosts"</span>],
});
</code></pre> <h3 id="removefeaturecode" tabindex="-1"><code>removeFeature(code)</code> <a href="#removefeaturecode" class="header-anchor">#</a></h3> <ul> <li><code>code</code> String</li> <li><code>返回</code> Boolean</li> </ul> <blockquote> <p>动态删除本插件应用的某个功能。</p> </blockquote> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">removeFeature</span>(<span class="hljs-string">"code"</span>);
</code></pre> <h2 id="用户" tabindex="-1">用户 <a href="#用户" class="header-anchor">#</a></h2> <p>获取当前用户头像、昵称</p> <h3 id="getuser" tabindex="-1"><code>getUser()</code> <a href="#getuser" class="header-anchor">#</a></h3> <ul> <li> <p><code>返回</code> Object</p> <blockquote> <p>{ avatar: String, nickname: String, type: ‘member’ | ‘user’ } | null</p> </blockquote> </li> </ul> <blockquote> <p>获取当前用户，未登录账号返回 <code>null</code></p> </blockquote> <pre><code class="hljs lang-js"><span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(utools.<span class="function_ hljs-title">getUser</span>());
</code></pre> <h3 id="fetchuserservertemporarytoken" tabindex="-1"><code>fetchUserServerTemporaryToken()</code> <a href="#fetchuserservertemporarytoken" class="header-anchor">#</a></h3> <ul> <li> <p><code>返回</code> Promise</p> <blockquote> <p>Promise&lt;{ token: string, expired_at: number }&gt;</p> </blockquote> </li> </ul> <blockquote> <p>获取用户服务端临时令牌，用于<a href="https://u.tools/docs/developer/server-api.html#%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E5%9F%BA%E7%A1%80%E4%BF%A1%E6%81%AF%E6%8E%A5%E5%8F%A3">获取用户基础信息接口</a></p> </blockquote> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">fetchUserServerTemporaryToken</span>().<span class="function_ hljs-title">then</span>(<span class="hljs-function">(<span class="hljs-params">ret</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(ret);
});
</code></pre> <h2 id="付费" tabindex="-1">付费 <a href="#付费" class="header-anchor">#</a></h2> <h3 id="ispurchaseduser" tabindex="-1"><code>isPurchasedUser()</code> <a href="#ispurchaseduser" class="header-anchor">#</a></h3> <ul> <li> <p><code>返回</code> Object</p> <blockquote> <p>Boolean | String</p> </blockquote> </li> </ul> <blockquote> <p>是否付费用户，返回 <code>true</code> 表示永久授权，返回 <code>"yyyy-mm-dd hh:mm:ss"</code> 表示授权到期时间</p> </blockquote> <pre><code class="hljs lang-js"><span class="hljs-keyword">if</span> (utools.<span class="function_ hljs-title">isPurchasedUser</span>()) {
  <span class="hljs-comment">// 已付费的合法用户，可使用插件应用完整功能</span>
}
</code></pre> <h3 id="openpurchaseoptions-callback" tabindex="-1"><code>openPurchase(options, callback)</code> <a href="#openpurchaseoptions-callback" class="header-anchor">#</a></h3> <ul> <li> <p><code>options</code></p> <ul> <li> <p><code>goodsId</code> String</p> <blockquote> <p>商品 ID，在 “ uTools 开发者工具” 插件应用中创建</p> </blockquote> </li> <li> <p><code>outOrderId</code> String (可选)</p> <blockquote> <p>第三方服务生成的订单号（6 - 64 字符）</p> </blockquote> </li> <li> <p><code>attach</code> String (可选)</p> <blockquote> <p>第三方服务附加数据，在查询 API 和支付通知中原样返回，可作为自定义参数使用（最多 256 字符）</p> </blockquote> </li> </ul> </li> <li> <p><code>callback</code></p> <blockquote> <p>购买成功后回调</p> </blockquote> </li> </ul> <blockquote> <p>打开付费 (软件付费模式)</p> </blockquote> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">openPurchase</span>({ <span class="hljs-attr">goodsId</span>: <span class="hljs-string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span> }, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// 购买完成，解锁全部功能</span>
});
</code></pre> <h3 id="openpaymentoptions-callback" tabindex="-1"><code>openPayment(options, callback)</code> <a href="#openpaymentoptions-callback" class="header-anchor">#</a></h3> <ul> <li> <p><code>options</code></p> <ul> <li> <p><code>goodsId</code> String</p> <blockquote> <p>商品 ID，在 “uTools 开发者工具” 插件应用中创建</p> </blockquote> </li> <li> <p><code>outOrderId</code> String (可选)</p> <blockquote> <p>第三方服务生成的订单号（6 - 64 字符）</p> </blockquote> </li> <li> <p><code>attach</code> String (可选)</p> <blockquote> <p>第三方服务附加数据，在查询 API 和支付通知中原样返回，可作为自定义参数使用（最多 256 字符）</p> </blockquote> </li> </ul> </li> <li> <p><code>callback</code></p> <blockquote> <p>支付成功后回调</p> </blockquote> </li> </ul> <blockquote> <p>打开支付（服务付费模式）</p> </blockquote> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">openPayment</span>({ <span class="hljs-attr">goodsId</span>: <span class="hljs-string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span> }, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// 用户完成支付</span>
});
</code></pre> <h3 id="fetchuserpayments" tabindex="-1"><code>fetchUserPayments()</code> <a href="#fetchuserpayments" class="header-anchor">#</a></h3> <ul> <li> <p><code>返回</code> Promise</p> <blockquote> <p>Promise&lt;{ order_id: string, out_order_id: string, open_id:string, pay_fee: number, body: string, attach: string, goods_id: string, paid_at: string,created_at }[]&gt;</p> </blockquote> </li> </ul> <blockquote> <p>获取用户支付记录</p> </blockquote> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">fetchUserPayments</span>().<span class="function_ hljs-title">then</span>(<span class="hljs-function">(<span class="hljs-params">ret</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(ret);
  <span class="hljs-comment">/**
  	    {
        "order_id": "ZsVSwEDoR7PPs6vWdAGplEpEpNjn8xb4", // utools 订单号
        "out_order_id": "", // 外部订单号
        "open_id": "a331127d654761ac91d086b942aae7b6", uTools 用户 ID, 对于此插件应用不变且唯一
        "pay_fee": 1, // 支付金额（分）
        "body": "会员1年", // 支付内容
        "attach": "", // 附加数据
        "goods_id": "6n193s7P95p9gA13786YkwQ5oxHpVW4f", // 商品 ID
        "paid_at": "2021-06-18 16:55:26", // 支付时间
        "created_at": "2021-06-18 16:55:11" // 订单生成时间
    }
  */</span>
});
</code></pre> <h2 id="输入" tabindex="-1">输入 <a href="#输入" class="header-anchor">#</a></h2> <h3 id="hidemainwindowpastefilefile" tabindex="-1"><code>hideMainWindowPasteFile(file)</code> <a href="#hidemainwindowpastefilefile" class="header-anchor">#</a></h3> <ul> <li> <p><code>file</code> String | Array</p> <blockquote> <p>文件路径或文件路径集合</p> </blockquote> </li> <li> <p><code>返回</code> Boolean</p> </li> </ul> <blockquote> <p>粘贴文件</p> </blockquote> <h4 id="示例-23" tabindex="-1">示例 <a href="#示例-23" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">hideMainWindowPasteFile</span>(<span class="hljs-string">"/path/to/file"</span>);
</code></pre> <h3 id="hidemainwindowpasteimageimg" tabindex="-1"><code>hideMainWindowPasteImage(img)</code> <a href="#hidemainwindowpasteimageimg" class="header-anchor">#</a></h3> <ul> <li> <p><code>img</code> String | Uint8Array</p> <blockquote> <p>图片路径 或 base64 或 Uint8Array</p> </blockquote> </li> <li> <p><code>返回</code> Boolean</p> </li> </ul> <blockquote> <p>粘贴图像</p> </blockquote> <h4 id="示例-24" tabindex="-1">示例 <a href="#示例-24" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-comment">// 路径</span>
utools.<span class="function_ hljs-title">hideMainWindowPasteImage</span>(<span class="hljs-string">"/path/to/img.png"</span>);
<span class="hljs-comment">// base64</span>
utools.<span class="function_ hljs-title">hideMainWindowPasteImage</span>(<span class="hljs-string">"data:image/png;base64,xxxxxxxxx"</span>);
</code></pre> <h3 id="hidemainwindowpastetexttext" tabindex="-1"><code>hideMainWindowPasteText(text)</code> <a href="#hidemainwindowpastetexttext" class="header-anchor">#</a></h3> <ul> <li> <p><code>text</code> String</p> <blockquote> <p>字符串文本</p> </blockquote> </li> <li> <p><code>返回</code> Boolean</p> </li> </ul> <blockquote> <p>粘贴文本</p> </blockquote> <h4 id="示例-25" tabindex="-1">示例 <a href="#示例-25" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">hideMainWindowPasteText</span>(<span class="hljs-string">"Hi, uTools"</span>);
</code></pre> <h3 id="hidemainwindowtypestringtext" tabindex="-1"><code>hideMainWindowTypeString(text)</code> <a href="#hidemainwindowtypestringtext" class="header-anchor">#</a></h3> <ul> <li> <p><code>text</code> String</p> <blockquote> <p>任意文本包括 Emoji 符号字符</p> </blockquote> </li> <li> <p><code>返回</code> Boolean</p> </li> </ul> <blockquote> <p>输入字符串（输入法原理）</p> </blockquote> <h4 id="示例-26" tabindex="-1">示例 <a href="#示例-26" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-comment">// 输入一句文本</span>
utools.<span class="function_ hljs-title">hideMainWindowTypeString</span>(<span class="hljs-string">"uTools 新一代效率工具平台 - 🐼👏🦄👨‍👩‍👧‍👦🚵🏻"</span>);
</code></pre> <h2 id="工具" tabindex="-1">工具 <a href="#工具" class="header-anchor">#</a></h2> <p>屏幕取色 &amp; 屏幕截图</p> <h3 id="screencolorpickcallback" tabindex="-1"><code>screenColorPick(callback)</code> <a href="#screencolorpickcallback" class="header-anchor">#</a></h3> <ul> <li> <p><code>callback</code> Function</p> <blockquote> <p>取色结束回调</p> </blockquote> <ul> <li><code>Object</code> <ul> <li><code>hex</code> String</li> <li><code>rgb</code> String</li> </ul> </li> </ul> </li> </ul> <blockquote> <p>屏幕取色</p> </blockquote> <h4 id="示例-27" tabindex="-1">示例 <a href="#示例-27" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">screenColorPick</span>(<span class="hljs-function">(<span class="hljs-params">{ hex, rgb }</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(hex); <span class="hljs-comment">// #FFFFFF</span>
  <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(rgb); <span class="hljs-comment">// RGB(0, 0, 0)</span>
});
</code></pre> <h3 id="screencapturecallback" tabindex="-1"><code>screenCapture(callback)</code> <a href="#screencapturecallback" class="header-anchor">#</a></h3> <ul> <li> <p><code>callback</code> Function</p> <blockquote> <p>截图结束回调</p> </blockquote> <ul> <li> <p><code>String</code></p> <blockquote> <p>图片的 Base64 字符串</p> </blockquote> </li> </ul> </li> </ul> <blockquote> <p>屏幕截图</p> </blockquote> <h4 id="示例-28" tabindex="-1">示例 <a href="#示例-28" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">screenCapture</span>(<span class="hljs-function">(<span class="hljs-params">base64Str</span>) =&gt;</span> {
  utools.<span class="function_ hljs-title">redirect</span>(<span class="hljs-string">"识别图片中文字"</span>, { <span class="hljs-attr">type</span>: <span class="hljs-string">"img"</span>, <span class="hljs-attr">data</span>: base64Str });
});
</code></pre> <h2 id="模拟" tabindex="-1">模拟 <a href="#模拟" class="header-anchor">#</a></h2> <p>模拟敲击键盘 和 鼠标点击</p> <h3 id="simulatekeyboardtapkey-modifier" tabindex="-1"><code>simulateKeyboardTap(key, ...modifier)</code> <a href="#simulatekeyboardtapkey-modifier" class="header-anchor">#</a></h3> <ul> <li> <p><code>key</code> String</p> <blockquote> <p>键值</p> </blockquote> </li> <li> <p><code>modifier</code> String (可选)</p> <blockquote> <p>功能键</p> </blockquote> </li> </ul> <blockquote> <p>模拟键盘按键</p> </blockquote> <h4 id="示例-29" tabindex="-1">示例 <a href="#示例-29" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-comment">// 模拟键盘敲击 Enter</span>
utools.<span class="function_ hljs-title">simulateKeyboardTap</span>(<span class="hljs-string">"enter"</span>);
<span class="hljs-comment">// windows linux 模拟粘贴</span>
utools.<span class="function_ hljs-title">simulateKeyboardTap</span>(<span class="hljs-string">"v"</span>, <span class="hljs-string">"ctrl"</span>);
<span class="hljs-comment">// macos 模拟粘贴</span>
utools.<span class="function_ hljs-title">simulateKeyboardTap</span>(<span class="hljs-string">"v"</span>, <span class="hljs-string">"command"</span>);
<span class="hljs-comment">// 模拟 Ctrl + Alt + A</span>
utools.<span class="function_ hljs-title">simulateKeyboardTap</span>(<span class="hljs-string">"a"</span>, <span class="hljs-string">"ctrl"</span>, <span class="hljs-string">"alt"</span>);
</code></pre> <h3 id="simulatemousemovex-y" tabindex="-1"><code>simulateMouseMove(x, y)</code> <a href="#simulatemousemovex-y" class="header-anchor">#</a></h3> <ul> <li><code>x</code> Integer</li> <li><code>y</code> Integer</li> </ul> <blockquote> <p>模拟鼠标移动</p> </blockquote> <h4 id="示例-30" tabindex="-1">示例 <a href="#示例-30" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">simulateMouseMove</span>(<span class="hljs-number">100</span>，<span class="hljs-number">100</span>)
</code></pre> <h3 id="simulatemouseclickx-y" tabindex="-1"><code>simulateMouseClick(x, y)</code> <a href="#simulatemouseclickx-y" class="header-anchor">#</a></h3> <ul> <li><code>x</code> Integer (可选)</li> <li><code>y</code> Integer (可选)</li> </ul> <blockquote> <p>模拟鼠标左键单击</p> </blockquote> <h4 id="示例-31" tabindex="-1">示例 <a href="#示例-31" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">simulateMouseClick</span>(<span class="hljs-number">100</span>，<span class="hljs-number">100</span>)
</code></pre> <h3 id="simulatemouserightclickx-y" tabindex="-1"><code>simulateMouseRightClick(x, y)</code> <a href="#simulatemouserightclickx-y" class="header-anchor">#</a></h3> <ul> <li><code>x</code> Integer (可选)</li> <li><code>y</code> Integer (可选)</li> </ul> <blockquote> <p>模拟鼠标右键单击</p> </blockquote> <h4 id="示例-32" tabindex="-1">示例 <a href="#示例-32" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">simulateMouseRightClick</span>(<span class="hljs-number">100</span>，<span class="hljs-number">100</span>)
</code></pre> <h3 id="simulatemousedoubleclickx-y" tabindex="-1"><code>simulateMouseDoubleClick(x, y)</code> <a href="#simulatemousedoubleclickx-y" class="header-anchor">#</a></h3> <ul> <li><code>x</code> Integer (可选)</li> <li><code>y</code> Integer (可选)</li> </ul> <blockquote> <p>模拟鼠标双击</p> </blockquote> <h4 id="示例-33" tabindex="-1">示例 <a href="#示例-33" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">simulateMouseDoubleClick</span>(<span class="hljs-number">100</span>，<span class="hljs-number">100</span>)
</code></pre> <h2 id="屏幕" tabindex="-1">屏幕 <a href="#屏幕" class="header-anchor">#</a></h2> <h3 id="getcursorscreenpoint" tabindex="-1"><code>getCursorScreenPoint()</code> <a href="#getcursorscreenpoint" class="header-anchor">#</a></h3> <ul> <li> <p><code>返回</code> Object</p> <blockquote> <p>{ x: Integer, y: Integer }</p> </blockquote> </li> </ul> <blockquote> <p>获取鼠标绝对位置</p> </blockquote> <h4 id="示例-34" tabindex="-1">示例 <a href="#示例-34" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-keyword">const</span> point = utools.<span class="function_ hljs-title">getCursorScreenPoint</span>();
<span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(point.<span class="hljs-property">x</span>, point.<span class="hljs-property">y</span>);
</code></pre> <h3 id="getprimarydisplay" tabindex="-1"><code>getPrimaryDisplay()</code> <a href="#getprimarydisplay" class="header-anchor">#</a></h3> <ul> <li> <p><code>返回</code> Object</p> <blockquote> <p><a href="https://www.electronjs.org/docs/api/structures/display">Display 对象 open in new window</a></p> </blockquote> </li> </ul> <blockquote> <p>获取主显示器</p> </blockquote> <h4 id="示例-35" tabindex="-1">示例 <a href="#示例-35" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-keyword">const</span> display = utools.<span class="function_ hljs-title">getPrimaryDisplay</span>();
<span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(display);
</code></pre> <h3 id="getalldisplays" tabindex="-1"><code>getAllDisplays()</code> <a href="#getalldisplays" class="header-anchor">#</a></h3> <ul> <li> <p><code>返回</code> Array</p> <blockquote> <p><a href="https://www.electronjs.org/docs/api/structures/display">Display 对象 open in new window</a> 集合</p> </blockquote> </li> </ul> <blockquote> <p>获取所有显示器</p> </blockquote> <h4 id="示例-36" tabindex="-1">示例 <a href="#示例-36" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-keyword">const</span> displays = utools.<span class="function_ hljs-title">getAllDisplays</span>();
<span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(displays);
</code></pre> <h3 id="getdisplaynearestpointpoint" tabindex="-1"><code>getDisplayNearestPoint(point)</code> <a href="#getdisplaynearestpointpoint" class="header-anchor">#</a></h3> <ul> <li> <p><code>point</code> Object</p> </li> <li> <p><code>返回</code> Object</p> <blockquote> <p><a href="https://www.electronjs.org/docs/api/structures/display">Display 对象 open in new window</a></p> </blockquote> </li> </ul> <blockquote> <p>获取位置所在的显示器</p> </blockquote> <h4 id="示例-37" tabindex="-1">示例 <a href="#示例-37" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-keyword">const</span> display = utools.<span class="function_ hljs-title">getDisplayNearestPoint</span>({ <span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">100</span> });
<span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(display);
</code></pre> <h3 id="getdisplaymatchingrect" tabindex="-1"><code>getDisplayMatching(rect)</code> <a href="#getdisplaymatchingrect" class="header-anchor">#</a></h3> <ul> <li> <p><code>rect</code> Object</p> </li> <li> <p><code>返回</code> Object</p> <blockquote> <p><a href="https://www.electronjs.org/docs/api/structures/display">Display 对象 open in new window</a></p> </blockquote> </li> </ul> <blockquote> <p>获取矩形所在的显示器</p> </blockquote> <h4 id="示例-38" tabindex="-1">示例 <a href="#示例-38" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-keyword">const</span> display = utools.<span class="function_ hljs-title">getDisplayMatching</span>({
  <span class="hljs-attr">x</span>: <span class="hljs-number">100</span>,
  <span class="hljs-attr">y</span>: <span class="hljs-number">100</span>,
  <span class="hljs-attr">width</span>: <span class="hljs-number">200</span>,
  <span class="hljs-attr">height</span>: <span class="hljs-number">200</span>,
});
<span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(display);
</code></pre> <h3 id="desktopcapturesourcesoptions" tabindex="-1"><code>desktopCaptureSources(options)</code> <a href="#desktopcapturesourcesoptions" class="header-anchor">#</a></h3> <ul> <li><code>options</code> Object</li> <li><code>返回</code> Promise</li> </ul> <blockquote> <p>录屏源 <a href="https://www.electronjs.org/zh/docs/latest/api/desktop-capturer">参考 Electron API desktopCapturer getSourcesopen in new window</a></p> </blockquote> <h4 id="示例-39" tabindex="-1">示例 <a href="#示例-39" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">(<span class="function_ hljs-title">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> ousrces = <span class="hljs-keyword">await</span> utools.<span class="function_ hljs-title">desktopCaptureSources</span>({
    <span class="hljs-attr">types</span>: [<span class="hljs-string">"window"</span>, <span class="hljs-string">"screen"</span>],
  });
  <span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">mediaDevices</span>.<span class="function_ hljs-title">getUserMedia</span>({
    <span class="hljs-attr">audio</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">video</span>: {
      <span class="hljs-attr">mandatory</span>: {
        <span class="hljs-attr">chromeMediaSource</span>: <span class="hljs-string">"desktop"</span>,
        <span class="hljs-attr">chromeMediaSourceId</span>: ousrces[<span class="hljs-number">0</span>].<span class="hljs-property">id</span>,
        <span class="hljs-attr">minWidth</span>: <span class="hljs-number">1280</span>,
        <span class="hljs-attr">maxWidth</span>: <span class="hljs-number">1280</span>,
        <span class="hljs-attr">minHeight</span>: <span class="hljs-number">720</span>,
        <span class="hljs-attr">maxHeight</span>: <span class="hljs-number">720</span>,
      },
    },
  });
  <span class="hljs-keyword">const</span> video = <span class="hljs-variable language_">document</span>.<span class="function_ hljs-title">querySelector</span>(<span class="hljs-string">"video"</span>);
  video.<span class="hljs-property">srcObject</span> = stream;
  video.<span class="hljs-property">onloadedmetadata</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> video.<span class="function_ hljs-title">play</span>();
})();
</code></pre> <h2 id="复制" tabindex="-1">复制 <a href="#复制" class="header-anchor">#</a></h2> <h3 id="copyfilefile" tabindex="-1"><code>copyFile(file)</code> <a href="#copyfilefile" class="header-anchor">#</a></h3> <ul> <li><code>file</code> String | Array</li> <li><code>返回</code> Boolean</li> </ul> <blockquote> <p>复制文件到系统剪贴板</p> </blockquote> <h4 id="示例-40" tabindex="-1">示例 <a href="#示例-40" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-comment">// 复制单个文件</span>
utools.<span class="function_ hljs-title">copyFile</span>(<span class="hljs-string">"/path/to/file"</span>);
<span class="hljs-comment">// 复制多个文件</span>
utools.<span class="function_ hljs-title">copyFile</span>([<span class="hljs-string">"/path/to/file1"</span>, <span class="hljs-string">"/path/to/file2"</span>]);
</code></pre> <h3 id="copyimageimg" tabindex="-1"><code>copyImage(img)</code> <a href="#copyimageimg" class="header-anchor">#</a></h3> <ul> <li><code>img</code> String | Buffer</li> <li><code>返回</code> Boolean</li> </ul> <blockquote> <p>复制图片到系统剪贴板</p> </blockquote> <h4 id="示例-41" tabindex="-1">示例 <a href="#示例-41" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-comment">// 路径</span>
utools.<span class="function_ hljs-title">copyImage</span>(<span class="hljs-string">"/path/to/img.png"</span>);
<span class="hljs-comment">// base64</span>
utools.<span class="function_ hljs-title">copyImage</span>(<span class="hljs-string">"data:image/png;base64,xxxxxxxxx"</span>);
</code></pre> <h3 id="copytexttext" tabindex="-1"><code>copyText(text)</code> <a href="#copytexttext" class="header-anchor">#</a></h3> <ul> <li><code>text</code> String</li> <li><code>返回</code> Boolean</li> </ul> <blockquote> <p>复制文本</p> </blockquote> <h4 id="示例-42" tabindex="-1">示例 <a href="#示例-42" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">copyText</span>(<span class="hljs-string">"Hi, uTools"</span>);
</code></pre> <h3 id="getcopyedfiles" tabindex="-1"><code>getCopyedFiles()</code> <a href="#getcopyedfiles" class="header-anchor">#</a></h3> <ul> <li><code>返回</code> Array</li> </ul> <blockquote> <p>获取复制的文件或文件夹</p> </blockquote> <h4 id="示例-43" tabindex="-1">示例 <a href="#示例-43" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">getCopyedFiles</span>();
<span class="hljs-comment">// 返回 [{ isFile: true, isDirectory: false, name: 'test.png', path: '/path/to/test.png' }]</span>
</code></pre> <h2 id="系统" tabindex="-1">系统 <a href="#系统" class="header-anchor">#</a></h2> <h3 id="shownotificationbody-clickfeaturecode" tabindex="-1"><code>showNotification(body, clickFeatureCode)</code> <a href="#shownotificationbody-clickfeaturecode" class="header-anchor">#</a></h3> <ul> <li> <p><code>body</code> String</p> </li> <li> <p><code>clickFeatureCode</code> String (可选)</p> <blockquote> <p>plugin.json 配置的 feature.code，点击通知进入插件应用功能(该 feature.cmds 至少包含一个搜索字符串关键字)</p> </blockquote> </li> </ul> <blockquote> <p>显示系统通知</p> </blockquote> <h4 id="示例-44" tabindex="-1">示例 <a href="#示例-44" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">showNotification</span>(<span class="hljs-string">"Hi, uTools"</span>);
</code></pre> <h3 id="shellopenpathfullpath" tabindex="-1"><code>shellOpenPath(fullPath)</code> <a href="#shellopenpathfullpath" class="header-anchor">#</a></h3> <ul> <li><code>fullPath</code> String</li> </ul> <blockquote> <p>系统默认方式打开给定的文件</p> </blockquote> <h4 id="示例-45" tabindex="-1">示例 <a href="#示例-45" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">shellOpenPath</span>(<span class="hljs-string">"/path/to/file"</span>);
</code></pre> <h3 id="shellshowiteminfolderfullpath" tabindex="-1"><code>shellShowItemInFolder(fullPath)</code> <a href="#shellshowiteminfolderfullpath" class="header-anchor">#</a></h3> <ul> <li><code>fullPath</code> String</li> </ul> <blockquote> <p>系统文件管理器中显示给定的文件</p> </blockquote> <h4 id="示例-46" tabindex="-1">示例 <a href="#示例-46" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">shellShowItemInFolder</span>(<span class="hljs-string">"/path/to/file"</span>);
</code></pre> <h3 id="shellopenexternalurl" tabindex="-1"><code>shellOpenExternal(url)</code> <a href="#shellopenexternalurl" class="header-anchor">#</a></h3> <ul> <li><code>url</code> String</li> </ul> <blockquote> <p>系统默认的协议打开 URL</p> </blockquote> <h4 id="示例-47" tabindex="-1">示例 <a href="#示例-47" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-comment">// 浏览器打开</span>
utools.<span class="function_ hljs-title">shellOpenExternal</span>(<span class="hljs-string">"https://u.tools"</span>);
</code></pre> <h3 id="shellbeep" tabindex="-1"><code>shellBeep()</code> <a href="#shellbeep" class="header-anchor">#</a></h3> <blockquote> <p>播放哔哔声</p> </blockquote> <h4 id="示例-48" tabindex="-1">示例 <a href="#示例-48" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">shellBeep</span>();
</code></pre> <h3 id="getnativeid" tabindex="-1"><code>getNativeId()</code> <a href="#getnativeid" class="header-anchor">#</a></h3> <ul> <li><code>返回</code> String</li> </ul> <blockquote> <p>获取本地 ID</p> </blockquote> <h4 id="示例-49" tabindex="-1">示例 <a href="#示例-49" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-comment">// 存储只与当前设备相关的信息</span>
<span class="hljs-keyword">const</span> nativeId = utools.<span class="function_ hljs-title">getNativeId</span>();
utools.<span class="hljs-property">dbStorage</span>.<span class="function_ hljs-title">setItem</span>(nativeId + <span class="hljs-string">"/key"</span>, <span class="hljs-string">"native value"</span>);
</code></pre> <h3 id="getappname" tabindex="-1"><code>getAppName()</code> <a href="#getappname" class="header-anchor">#</a></h3> <ul> <li><code>返回</code> String</li> </ul> <blockquote> <p>获取软件名称</p> </blockquote> <h4 id="示例-50" tabindex="-1">示例 <a href="#示例-50" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(utools.<span class="function_ hljs-title">getAppName</span>());
</code></pre> <h3 id="getappversion" tabindex="-1"><code>getAppVersion()</code> <a href="#getappversion" class="header-anchor">#</a></h3> <ul> <li><code>返回</code> String</li> </ul> <blockquote> <p>获取软件版本</p> </blockquote> <h4 id="示例-51" tabindex="-1">示例 <a href="#示例-51" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(utools.<span class="function_ hljs-title">getAppVersion</span>());
</code></pre> <h3 id="getpathname" tabindex="-1"><code>getPath(name)</code> <a href="#getpathname" class="header-anchor">#</a></h3> <ul> <li> <p><code>name</code> String</p> <blockquote> <p>你可以通过名称请求以下的路径:</p> </blockquote> <ul> <li><code>home</code> 用户的 home 文件夹（主目录）</li> <li><code>appData</code> 当前用户的应用数据文件夹，默认对应： <ul> <li><code>%APPDATA%</code> Windows 中</li> <li><code>~/Library/Application Support</code> macOS 中</li> </ul> </li> <li><code>userData</code> 储存你应用程序设置文件的文件夹，默认是 appData 文件夹附加应用的名称</li> <li><code>temp</code> 临时文件夹</li> <li><code>exe</code> 当前的可执行文件</li> <li><code>desktop</code> 当前用户的桌面文件夹</li> <li><code>documents</code> 用户文档目录的路径</li> <li><code>downloads</code> 用户下载目录的路径</li> <li><code>music</code> 用户音乐目录的路径</li> <li><code>pictures</code> 用户图片目录的路径</li> <li><code>videos</code> 用户视频目录的路径</li> <li><code>logs</code> 应用程序的日志文件夹</li> </ul> </li> <li> <p><code>返回</code> String</p> </li> </ul> <blockquote> <p>获取路径</p> </blockquote> <h4 id="示例-52" tabindex="-1">示例 <a href="#示例-52" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-comment">// 获取下载路径</span>
<span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(utools.<span class="function_ hljs-title">getPath</span>(<span class="hljs-string">"downloads"</span>));
</code></pre> <h3 id="getfileiconfilepath" tabindex="-1"><code>getFileIcon(filePath)</code> <a href="#getfileiconfilepath" class="header-anchor">#</a></h3> <ul> <li> <p><code>filePath</code> String</p> <blockquote> <p>文件路径、文件扩展名、“folder”</p> </blockquote> </li> <li> <p><code>返回</code> String</p> </li> </ul> <blockquote> <p>获取文件图标</p> </blockquote> <h4 id="示例-53" tabindex="-1">示例 <a href="#示例-53" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-comment">// 获取扩展名为 "txt" 的文件图标</span>
utools.<span class="function_ hljs-title">getFileIcon</span>(<span class="hljs-string">".txt"</span>);
<span class="hljs-comment">// 获取文件夹图标</span>
utools.<span class="function_ hljs-title">getFileIcon</span>(<span class="hljs-string">"folder"</span>);
<span class="hljs-comment">// 获取文件图标</span>
utools.<span class="function_ hljs-title">getFileIcon</span>(<span class="hljs-string">"D:\\test.url"</span>);
</code></pre> <h3 id="readcurrentfolderpath" tabindex="-1"><code>readCurrentFolderPath()</code> <a href="#readcurrentfolderpath" class="header-anchor">#</a></h3> <ul> <li><code>返回</code> Promise</li> </ul> <blockquote> <p>读取当前文件管理器窗口路径 (linux 不支持)</p> </blockquote> <h4 id="示例-54" tabindex="-1">示例 <a href="#示例-54" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">readCurrentFolderPath</span>().<span class="function_ hljs-title">then</span>(<span class="hljs-function">(<span class="hljs-params">dir</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(dir);
});
</code></pre> <h3 id="readcurrentbrowserurl" tabindex="-1"><code>readCurrentBrowserUrl()</code> <a href="#readcurrentbrowserurl" class="header-anchor">#</a></h3> <ul> <li><code>返回</code> Promise</li> </ul> <blockquote> <p>读取当前浏览器窗口 URL (linux 不支持)</p> </blockquote> <blockquote> <p>MacOS 支持浏览器 Safari、Chrome、Microsoft Edge、Opera、Vivaldi、Brave</p> </blockquote> <blockquote> <p>Windows 支持浏览器 Chrome、Firefox、Edge、IE、Opera、Brave</p> </blockquote> <h4 id="示例-55" tabindex="-1">示例 <a href="#示例-55" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js">utools.<span class="function_ hljs-title">readCurrentBrowserUrl</span>().<span class="function_ hljs-title">then</span>(<span class="hljs-function">(<span class="hljs-params">url</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(url);
});
</code></pre> <h3 id="isdev" tabindex="-1"><code>isDev()</code> <a href="#isdev" class="header-anchor">#</a></h3> <blockquote> <p>判断插件应用是否在开发环境</p> </blockquote> <h4 id="示例-56" tabindex="-1">示例 <a href="#示例-56" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-keyword">if</span> (utools.<span class="function_ hljs-title">isDev</span>()) {
  <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-string">"coding"</span>);
}
</code></pre> <h3 id="ismacos" tabindex="-1"><code>isMacOS()</code> <a href="#ismacos" class="header-anchor">#</a></h3> <blockquote> <p>是否 MacOS 操作系统</p> </blockquote> <h4 id="示例-57" tabindex="-1">示例 <a href="#示例-57" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-keyword">if</span> (utools.<span class="function_ hljs-title">isMacOS</span>()) {
  <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-string">"mac"</span>);
}
</code></pre> <h3 id="iswindows" tabindex="-1"><code>isWindows()</code> <a href="#iswindows" class="header-anchor">#</a></h3> <blockquote> <p>是否 Windows 操作系统</p> </blockquote> <h4 id="示例-58" tabindex="-1">示例 <a href="#示例-58" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-keyword">if</span> (utools.<span class="function_ hljs-title">isWindows</span>()) {
  <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-string">"windows"</span>);
}
</code></pre> <h3 id="islinux" tabindex="-1"><code>isLinux()</code> <a href="#islinux" class="header-anchor">#</a></h3> <blockquote> <p>是否 Linux 操作系统</p> </blockquote> <h4 id="示例-59" tabindex="-1">示例 <a href="#示例-59" class="header-anchor">#</a></h4> <pre><code class="hljs lang-js"><span class="hljs-keyword">if</span> (utools.<span class="function_ hljs-title">isLinux</span>()) {
  <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-string">"linux"</span>);
}
</code></pre> </body></html> <hr> <script async crossorigin="anonymous" data-category="Announcements" data-category-id="DIC_kwDOMaY3rc4ChNfY" data-emit-metadata="0" data-input-position="top" data-lang="zh-CN" data-loading="lazy" data-mapping="pathname" data-reactions-enabled="1" data-repo="share121/ablog" data-repo-id="R_kgDOMaY3rQ" data-strict="0" data-theme="light" src="https://giscus.app/client.js"></script> </main> <aside id="toc"><nav class="table-of-contents"><ol><li><a href="#utools-api">uTools API </a><ol><li><a href="#事件">事件 </a><ol><li><a href="#onpluginentercallback">onPluginEnter(callback) </a><ol><li><a href="#示例">示例 </a></li></ol></li><li><a href="#onmainpushcallback-selectcallback">onMainPush(callback, selectCallback) </a><ol><li><a href="#示例-1">示例 </a></li></ol></li><li><a href="#onpluginoutcallback">onPluginOut(callback) </a><ol><li><a href="#示例-2">示例 </a></li></ol></li><li><a href="#onplugindetachcallback">onPluginDetach(callback) </a><ol><li><a href="#示例-3">示例 </a></li></ol></li><li><a href="#ondbpullcallback">onDbPull(callback) </a><ol><li><a href="#示例-4">示例 </a></li></ol></li></ol></li><li><a href="#窗口交互">窗口交互 </a><ol><li><a href="#hidemainwindowisrestoreprewindow">hideMainWindow(isRestorePreWindow) </a><ol><li><a href="#示例-5">示例 </a></li></ol></li><li><a href="#showmainwindow">showMainWindow() </a><ol><li><a href="#示例-6">示例 </a></li></ol></li><li><a href="#setexpendheightheight">setExpendHeight(height) </a><ol><li><a href="#示例-7">示例 </a></li></ol></li><li><a href="#setsubinputonchange-placeholder-isfocus">setSubInput(onChange, placeholder, isFocus) </a><ol><li><a href="#示例-8">示例 </a></li></ol></li><li><a href="#removesubinput">removeSubInput() </a><ol><li><a href="#示例-9">示例 </a></li></ol></li><li><a href="#setsubinputvaluevalue">setSubInputValue(value) </a><ol><li><a href="#示例-10">示例 </a></li></ol></li><li><a href="#subinputfocus">subInputFocus() </a><ol><li><a href="#示例-11">示例 </a></li></ol></li><li><a href="#subinputselect">subInputSelect() </a><ol><li><a href="#示例-12">示例 </a></li></ol></li><li><a href="#subinputblur">subInputBlur() </a><ol><li><a href="#示例-13">示例 </a></li></ol></li><li><a href="#outplugin">outPlugin() </a><ol><li><a href="#示例-14">示例 </a></li></ol></li><li><a href="#redirectlabel-payload">redirect(label, payload) </a><ol><li><a href="#示例-15">示例 </a></li></ol></li><li><a href="#showopendialogoptions">showOpenDialog(options) </a><ol><li><a href="#示例-16">示例 </a></li></ol></li><li><a href="#showsavedialogoptions">showSaveDialog(options) </a><ol><li><a href="#示例-17">示例 </a></li></ol></li><li><a href="#findinpagetext-options">findInPage(text, options) </a><ol><li><a href="#示例-18">示例 </a></li></ol></li><li><a href="#stopfindinpageaction">stopFindInPage(action) </a><ol><li><a href="#示例-19">示例 </a></li></ol></li><li><a href="#startdragfile">startDrag(file) </a><ol><li><a href="#示例-20">示例 </a></li></ol></li><li><a href="#createbrowserwindowurl-options-callback">createBrowserWindow(url, options, callback) </a><ol><li><a href="#示例-21">示例 </a></li></ol></li><li><a href="#isdarkcolors">isDarkColors() </a><ol><li><a href="#示例-22">示例 </a></li></ol></li></ol></li><li><a href="#动态增减功能">动态增减功能 </a><ol><li><a href="#getfeaturescodes">getFeatures(codes) </a></li><li><a href="#setfeaturefeature">setFeature(feature) </a></li><li><a href="#removefeaturecode">removeFeature(code) </a></li></ol></li><li><a href="#用户">用户 </a><ol><li><a href="#getuser">getUser() </a></li><li><a href="#fetchuserservertemporarytoken">fetchUserServerTemporaryToken() </a></li></ol></li><li><a href="#付费">付费 </a><ol><li><a href="#ispurchaseduser">isPurchasedUser() </a></li><li><a href="#openpurchaseoptions-callback">openPurchase(options, callback) </a></li><li><a href="#openpaymentoptions-callback">openPayment(options, callback) </a></li><li><a href="#fetchuserpayments">fetchUserPayments() </a></li></ol></li><li><a href="#输入">输入 </a><ol><li><a href="#hidemainwindowpastefilefile">hideMainWindowPasteFile(file) </a><ol><li><a href="#示例-23">示例 </a></li></ol></li><li><a href="#hidemainwindowpasteimageimg">hideMainWindowPasteImage(img) </a><ol><li><a href="#示例-24">示例 </a></li></ol></li><li><a href="#hidemainwindowpastetexttext">hideMainWindowPasteText(text) </a><ol><li><a href="#示例-25">示例 </a></li></ol></li><li><a href="#hidemainwindowtypestringtext">hideMainWindowTypeString(text) </a><ol><li><a href="#示例-26">示例 </a></li></ol></li></ol></li><li><a href="#工具">工具 </a><ol><li><a href="#screencolorpickcallback">screenColorPick(callback) </a><ol><li><a href="#示例-27">示例 </a></li></ol></li><li><a href="#screencapturecallback">screenCapture(callback) </a><ol><li><a href="#示例-28">示例 </a></li></ol></li></ol></li><li><a href="#模拟">模拟 </a><ol><li><a href="#simulatekeyboardtapkey-modifier">simulateKeyboardTap(key, ...modifier) </a><ol><li><a href="#示例-29">示例 </a></li></ol></li><li><a href="#simulatemousemovex-y">simulateMouseMove(x, y) </a><ol><li><a href="#示例-30">示例 </a></li></ol></li><li><a href="#simulatemouseclickx-y">simulateMouseClick(x, y) </a><ol><li><a href="#示例-31">示例 </a></li></ol></li><li><a href="#simulatemouserightclickx-y">simulateMouseRightClick(x, y) </a><ol><li><a href="#示例-32">示例 </a></li></ol></li><li><a href="#simulatemousedoubleclickx-y">simulateMouseDoubleClick(x, y) </a><ol><li><a href="#示例-33">示例 </a></li></ol></li></ol></li><li><a href="#屏幕">屏幕 </a><ol><li><a href="#getcursorscreenpoint">getCursorScreenPoint() </a><ol><li><a href="#示例-34">示例 </a></li></ol></li><li><a href="#getprimarydisplay">getPrimaryDisplay() </a><ol><li><a href="#示例-35">示例 </a></li></ol></li><li><a href="#getalldisplays">getAllDisplays() </a><ol><li><a href="#示例-36">示例 </a></li></ol></li><li><a href="#getdisplaynearestpointpoint">getDisplayNearestPoint(point) </a><ol><li><a href="#示例-37">示例 </a></li></ol></li><li><a href="#getdisplaymatchingrect">getDisplayMatching(rect) </a><ol><li><a href="#示例-38">示例 </a></li></ol></li><li><a href="#desktopcapturesourcesoptions">desktopCaptureSources(options) </a><ol><li><a href="#示例-39">示例 </a></li></ol></li></ol></li><li><a href="#复制">复制 </a><ol><li><a href="#copyfilefile">copyFile(file) </a><ol><li><a href="#示例-40">示例 </a></li></ol></li><li><a href="#copyimageimg">copyImage(img) </a><ol><li><a href="#示例-41">示例 </a></li></ol></li><li><a href="#copytexttext">copyText(text) </a><ol><li><a href="#示例-42">示例 </a></li></ol></li><li><a href="#getcopyedfiles">getCopyedFiles() </a><ol><li><a href="#示例-43">示例 </a></li></ol></li></ol></li><li><a href="#系统">系统 </a><ol><li><a href="#shownotificationbody-clickfeaturecode">showNotification(body, clickFeatureCode) </a><ol><li><a href="#示例-44">示例 </a></li></ol></li><li><a href="#shellopenpathfullpath">shellOpenPath(fullPath) </a><ol><li><a href="#示例-45">示例 </a></li></ol></li><li><a href="#shellshowiteminfolderfullpath">shellShowItemInFolder(fullPath) </a><ol><li><a href="#示例-46">示例 </a></li></ol></li><li><a href="#shellopenexternalurl">shellOpenExternal(url) </a><ol><li><a href="#示例-47">示例 </a></li></ol></li><li><a href="#shellbeep">shellBeep() </a><ol><li><a href="#示例-48">示例 </a></li></ol></li><li><a href="#getnativeid">getNativeId() </a><ol><li><a href="#示例-49">示例 </a></li></ol></li><li><a href="#getappname">getAppName() </a><ol><li><a href="#示例-50">示例 </a></li></ol></li><li><a href="#getappversion">getAppVersion() </a><ol><li><a href="#示例-51">示例 </a></li></ol></li><li><a href="#getpathname">getPath(name) </a><ol><li><a href="#示例-52">示例 </a></li></ol></li><li><a href="#getfileiconfilepath">getFileIcon(filePath) </a><ol><li><a href="#示例-53">示例 </a></li></ol></li><li><a href="#readcurrentfolderpath">readCurrentFolderPath() </a><ol><li><a href="#示例-54">示例 </a></li></ol></li><li><a href="#readcurrentbrowserurl">readCurrentBrowserUrl() </a><ol><li><a href="#示例-55">示例 </a></li></ol></li><li><a href="#isdev">isDev() </a><ol><li><a href="#示例-56">示例 </a></li></ol></li><li><a href="#ismacos">isMacOS() </a><ol><li><a href="#示例-57">示例 </a></li></ol></li><li><a href="#iswindows">isWindows() </a><ol><li><a href="#示例-58">示例 </a></li></ol></li><li><a href="#islinux">isLinux() </a><ol><li><a href="#示例-59">示例 </a></li></ol></li></ol></li></ol></li></ol></nav></aside> </div> <script>function debounce(t,e){let a=null;return function(){clearTimeout(a),a=setTimeout(()=>{t.apply(this,arguments)},e)}}let setGiscusTheme=(()=>{let e;function a(t){document.querySelector(".giscus-frame")?.contentWindow?.postMessage({giscus:{setConfig:{theme:"light"===t?"data:text/css,*%7boverflow-wrap%3abreak-word%3bscroll-margin-top%3a10vh%3b-webkit-tap-highlight-color%3atransparent%7dmain%7b--color-prettylights-syntax-comment%3a%236e7781%3b--color-prettylights-syntax-constant%3a%230550ae%3b--color-prettylights-syntax-entity%3a%238250df%3b--color-prettylights-syntax-storage-modifier-import%3a%2324292f%3b--color-prettylights-syntax-entity-tag%3a%23116329%3b--color-prettylights-syntax-keyword%3a%23cf222e%3b--color-prettylights-syntax-string%3a%230a3069%3b--color-prettylights-syntax-variable%3a%23953800%3b--color-prettylights-syntax-brackethighlighter-unmatched%3a%2382071e%3b--color-prettylights-syntax-invalid-illegal-text%3a%23f6f8fa%3b--color-prettylights-syntax-invalid-illegal-bg%3a%2382071e%3b--color-prettylights-syntax-carriage-return-text%3a%23f6f8fa%3b--color-prettylights-syntax-carriage-return-bg%3a%23cf222e%3b--color-prettylights-syntax-string-regexp%3a%23116329%3b--color-prettylights-syntax-markup-list%3a%233b2300%3b--color-prettylights-syntax-markup-heading%3a%230550ae%3b--color-prettylights-syntax-markup-italic%3a%2324292f%3b--color-prettylights-syntax-markup-bold%3a%2324292f%3b--color-prettylights-syntax-markup-deleted-text%3a%2382071e%3b--color-prettylights-syntax-markup-deleted-bg%3a%23ffebe9%3b--color-prettylights-syntax-markup-inserted-text%3a%23116329%3b--color-prettylights-syntax-markup-inserted-bg%3a%23dafbe1%3b--color-prettylights-syntax-markup-changed-text%3a%23953800%3b--color-prettylights-syntax-markup-changed-bg%3a%23ffd8b5%3b--color-prettylights-syntax-markup-ignored-text%3a%23eaeef2%3b--color-prettylights-syntax-markup-ignored-bg%3a%230550ae%3b--color-prettylights-syntax-meta-diff-range%3a%238250df%3b--color-prettylights-syntax-brackethighlighter-angle%3a%2357606a%3b--color-prettylights-syntax-sublimelinter-gutter-mark%3a%238c959f%3b--color-prettylights-syntax-constant-other-reference-link%3a%230a3069%3b--color-btn-text%3a%2324292f%3b--color-btn-bg%3a%23f6f8fa%3b--color-btn-border%3a%231f232826%3b--color-btn-shadow%3a0+1px+0+%231f23280a%3b--color-btn-inset-shadow%3ainset+0+1px+0+%23ffffff40%3b--color-btn-hover-bg%3a%23f3f4f6%3b--color-btn-hover-border%3a%231f232826%3b--color-btn-active-bg%3a%23ebecf0%3b--color-btn-active-border%3a%231f232826%3b--color-btn-selected-bg%3a%23eeeff2%3b--color-btn-primary-text%3a%23fff%3b--color-btn-primary-bg%3a%231f883d%3b--color-btn-primary-border%3a%231f232826%3b--color-btn-primary-shadow%3a0+1px+0+%231f23281a%3b--color-btn-primary-inset-shadow%3ainset+0+1px+0+%23ffffff08%3b--color-btn-primary-hover-bg%3a%231a7f37%3b--color-btn-primary-hover-border%3a%231f232826%3b--color-btn-primary-selected-bg%3a%23187733%3b--color-btn-primary-selected-shadow%3ainset+0+1px+0+%23002d1133%3b--color-btn-primary-disabled-text%3a%23fffc%3b--color-btn-primary-disabled-bg%3a%2394d3a2%3b--color-btn-primary-disabled-border%3a%231f232826%3b--color-action-list-item-default-hover-bg%3a%23d0d7de52%3b--color-segmented-control-bg%3a%23eaeef2%3b--color-segmented-control-button-bg%3a%23fff%3b--color-segmented-control-button-selected-border%3a%238c959f%3b--color-fg-default%3a%231f2328%3b--color-fg-muted%3a%23656d76%3b--color-fg-subtle%3a%236e7781%3b--color-canvas-default%3a%23fff%3b--color-canvas-overlay%3a%23fff%3b--color-canvas-inset%3a%23f6f8fa%3b--color-canvas-subtle%3a%23f6f8fa%3b--color-border-default%3a%23d0d7de%3b--color-border-muted%3a%23d8dee4%3b--color-neutral-muted%3a%23afb8c133%3b--color-accent-fg%3a%230969da%3b--color-accent-emphasis%3a%230969da%3b--color-accent-muted%3a%2354aeff66%3b--color-accent-subtle%3a%23ddf4ff%3b--color-success-fg%3a%231a7f37%3b--color-attention-fg%3a%239a6700%3b--color-attention-muted%3a%23d4a72c66%3b--color-attention-subtle%3a%23fff8c5%3b--color-danger-fg%3a%23d1242f%3b--color-danger-muted%3a%23ff818266%3b--color-danger-subtle%3a%23ffebe9%3b--color-primer-shadow-inset%3ainset+0+1px+0+%23d0d7de33%3b--color-scale-gray-1%3a%23eaeef2%3b--color-scale-blue-1%3a%23b6e3ff%3b--color-social-reaction-bg-hover%3avar(--color-scale-gray-1)%3b--color-social-reaction-bg-reacted-hover%3avar(--color-scale-blue-1)%7dmain+.pagination-loader-container%7bbackground-image%3aurl(https%3a%2f%2fgithub.com%2fimages%2fmodules%2fpulls%2fprogressive-disclosure-line.svg)%7dmain+.gsc-loading-image%7bbackground-image%3aurl(https%3a%2f%2fgithub.githubassets.com%2fimages%2fmona-loading-default.gif)%7d":"data:text/css,*%7boverflow-wrap%3abreak-word%3bscroll-margin-top%3a10vh%3b-webkit-tap-highlight-color%3atransparent%7dhtml%7bbackground%3a%230d1117%7dmain%7b--color-prettylights-syntax-comment%3a%238b949e%3b--color-prettylights-syntax-constant%3a%2379c0ff%3b--color-prettylights-syntax-entity%3a%23d2a8ff%3b--color-prettylights-syntax-storage-modifier-import%3a%23c9d1d9%3b--color-prettylights-syntax-entity-tag%3a%237ee787%3b--color-prettylights-syntax-keyword%3a%23ff7b72%3b--color-prettylights-syntax-string%3a%23a5d6ff%3b--color-prettylights-syntax-variable%3a%23ffa657%3b--color-prettylights-syntax-brackethighlighter-unmatched%3a%23f85149%3b--color-prettylights-syntax-invalid-illegal-text%3a%23f0f6fc%3b--color-prettylights-syntax-invalid-illegal-bg%3a%238e1519%3b--color-prettylights-syntax-carriage-return-text%3a%23f0f6fc%3b--color-prettylights-syntax-carriage-return-bg%3a%23b62324%3b--color-prettylights-syntax-string-regexp%3a%237ee787%3b--color-prettylights-syntax-markup-list%3a%23f2cc60%3b--color-prettylights-syntax-markup-heading%3a%231f6feb%3b--color-prettylights-syntax-markup-italic%3a%23c9d1d9%3b--color-prettylights-syntax-markup-bold%3a%23c9d1d9%3b--color-prettylights-syntax-markup-deleted-text%3a%23ffdcd7%3b--color-prettylights-syntax-markup-deleted-bg%3a%2367060c%3b--color-prettylights-syntax-markup-inserted-text%3a%23aff5b4%3b--color-prettylights-syntax-markup-inserted-bg%3a%23033a16%3b--color-prettylights-syntax-markup-changed-text%3a%23ffdfb6%3b--color-prettylights-syntax-markup-changed-bg%3a%235a1e02%3b--color-prettylights-syntax-markup-ignored-text%3a%23c9d1d9%3b--color-prettylights-syntax-markup-ignored-bg%3a%231158c7%3b--color-prettylights-syntax-meta-diff-range%3a%23d2a8ff%3b--color-prettylights-syntax-brackethighlighter-angle%3a%238b949e%3b--color-prettylights-syntax-sublimelinter-gutter-mark%3a%23484f58%3b--color-prettylights-syntax-constant-other-reference-link%3a%23a5d6ff%3b--color-btn-text%3a%23c9d1d9%3b--color-btn-bg%3a%2321262d%3b--color-btn-border%3a%23f0f6fc1a%3b--color-btn-shadow%3a0+0+%230000%3b--color-btn-inset-shadow%3a0+0+%230000%3b--color-btn-hover-bg%3a%2330363d%3b--color-btn-hover-border%3a%238b949e%3b--color-btn-active-bg%3a%23282e33%3b--color-btn-active-border%3a%236e7681%3b--color-btn-selected-bg%3a%23161b22%3b--color-btn-primary-text%3a%23fff%3b--color-btn-primary-bg%3a%23238636%3b--color-btn-primary-border%3a%23f0f6fc1a%3b--color-btn-primary-shadow%3a0+0+%230000%3b--color-btn-primary-inset-shadow%3a0+0+%230000%3b--color-btn-primary-hover-bg%3a%232ea043%3b--color-btn-primary-hover-border%3a%23f0f6fc1a%3b--color-btn-primary-selected-bg%3a%23238636%3b--color-btn-primary-selected-shadow%3a0+0+%230000%3b--color-btn-primary-disabled-text%3a%23ffffff80%3b--color-btn-primary-disabled-bg%3a%2323863699%3b--color-btn-primary-disabled-border%3a%23f0f6fc1a%3b--color-action-list-item-default-hover-bg%3a%23b1bac41f%3b--color-segmented-control-bg%3a%236e76811a%3b--color-segmented-control-button-bg%3a%230d1117%3b--color-segmented-control-button-selected-border%3a%236e7681%3b--color-fg-default%3a%23e6edf3%3b--color-fg-muted%3a%237d8590%3b--color-fg-subtle%3a%236e7681%3b--color-canvas-default%3a%230d1117%3b--color-canvas-overlay%3a%23161b22%3b--color-canvas-inset%3a%23010409%3b--color-canvas-subtle%3a%23161b22%3b--color-border-default%3a%2330363d%3b--color-border-muted%3a%2321262d%3b--color-neutral-muted%3a%236e768166%3b--color-accent-fg%3a%232f81f7%3b--color-accent-emphasis%3a%231f6feb%3b--color-accent-muted%3a%23388bfd66%3b--color-accent-subtle%3a%23388bfd1a%3b--color-success-fg%3a%233fb950%3b--color-attention-fg%3a%23d29922%3b--color-attention-muted%3a%23bb800966%3b--color-attention-subtle%3a%23bb800926%3b--color-danger-fg%3a%23f85149%3b--color-danger-muted%3a%23f8514966%3b--color-danger-subtle%3a%23f851491a%3b--color-primer-shadow-inset%3a0+0+%230000%3b--color-scale-gray-7%3a%2321262d%3b--color-scale-blue-8%3a%230c2d6b%3b--color-social-reaction-bg-hover%3avar(--color-scale-gray-7)%3b--color-social-reaction-bg-reacted-hover%3avar(--color-scale-blue-8)%7dmain+.pagination-loader-container%7bbackground-image%3aurl(https%3a%2f%2fgithub.com%2fimages%2fmodules%2fpulls%2fprogressive-disclosure-line-dark.svg)%7dmain+.gsc-loading-image%7bbackground-image%3aurl(https%3a%2f%2fgithub.githubassets.com%2fimages%2fmona-loading-dark.gif)%7d"}}},"https://giscus.app")}return t=>{"loading"===document.readyState?e=setInterval(()=>a(t),500):(clearInterval(e),a(t))}})(),lightQuery=window.matchMedia("(prefers-color-scheme:light)");function getRandomInt(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t)+t)}lightQuery.addEventListener("change",t=>{localStorage.getItem("theme")||(document.documentElement.dataset.theme=["dark","light"][+t.matches],setGiscusTheme(["dark","light"][+t.matches]))}),localStorage.getItem("theme")?"dark"===localStorage.getItem("theme")&&(document.documentElement.dataset.theme="dark",setTimeout(setGiscusTheme("dark"),5e3)):(document.documentElement.dataset.theme=["dark","light"][+lightQuery.matches],setTimeout(setGiscusTheme(["dark","light"][+lightQuery.matches]),5e3)),document.querySelectorAll(".theme-switch").forEach(t=>t.addEventListener("click",t=>{"dark"===document.documentElement.dataset.theme?(lightQuery.matches?localStorage.removeItem("theme"):localStorage.setItem("theme","light"),document.documentElement.dataset.theme="light",setGiscusTheme("light")):(lightQuery.matches?localStorage.setItem("theme","dark"):localStorage.removeItem("theme"),document.documentElement.dataset.theme="dark",setGiscusTheme("dark"))})),window.matchMedia("(max-width: 960px)").addEventListener("change",t=>{document.querySelector("#content").classList.remove("open")}),document.querySelector(".menu-btn").addEventListener("click",()=>{document.querySelector("#content").classList.toggle("open")}),location.hash&&document.querySelector(decodeURIComponent(location.hash))?document.querySelector(decodeURIComponent(location.hash)).scrollIntoView():document.querySelector("#main").scrollTop=+(localStorage.getItem("scroll-top-"+location.pathname)??0),document.querySelector("#main").style.scrollBehavior="smooth",document.querySelector("#content").scrollTop=+(localStorage.getItem("content-scroll-top")??0),document.querySelector("#main").addEventListener("scroll",debounce(t=>{localStorage.setItem("scroll-top-"+location.pathname,t.target.scrollTop)},100)),document.querySelector("#content").addEventListener("scroll",debounce(t=>{localStorage.setItem("content-scroll-top",t.target.scrollTop)},100)),document.querySelector(".random-btn").addEventListener("click",t=>{var e=document.querySelectorAll("#content a");e[getRandomInt(0,e.length)].click()})</script> <script type="module"> import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
      mermaid.initialize({
        securityLevel: "loose",
        theme: "default",
        startOnLoad: false,
      });
      await mermaid.run({ querySelector: ".mermaid-light" });
      mermaid.initialize({
        securityLevel: "loose",
        theme: "dark",
        startOnLoad: false,
      });
      await mermaid.run({ querySelector: ".mermaid-dark" });
      document
        .querySelectorAll(".mermaid")
        .forEach((e) => e.classList.add("init")); </script> </body> </html> 