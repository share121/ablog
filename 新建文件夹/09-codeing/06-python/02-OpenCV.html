<!doctype html><html data-theme="light" lang="zh-CN"><head> <meta charset="UTF-8"> <meta content="width=device-width,initial-scale=1" name="viewport"> <title>ABlog</title> <link href="../../../logo.svg" rel="icon" type="image/x-icon"> <link href="../../../normalize.css" rel="stylesheet"> <link href="../../../github-markdown.css" rel="stylesheet"> <link href="../../../github-alert.css" rel="stylesheet"> <link href="../../../hljs.css" rel="stylesheet"> <link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" crossorigin="anonymous" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+"> <link href="../../../index.css" rel="stylesheet"> <meta content="ABlog 是一个高性能的文档生成器" name="description"> <meta content="ABlog,文档生成器,markdown,md,html,markdown转html,md2html,blog" name="keywords"> </head> <body> <header id="header-box"> <svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg" class="menu-btn"> <title>菜单</title> <path d="M3 4h18v2H3zm0 7h18v2H3zm0 7h18v2H3z" fill="currentColor"></path> </svg> <h1 id="header"><a href="../../../index.html">ABlog</a></h1> <div class="github"> <a href="https://github.com/share121/ablog" target="_blank">Github</a> </div> <svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg" class="random-btn"> <title>文章漫游</title> <path d="M5 5v14h14V5zM3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm12.5 12a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3M10 8.5a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0m2 5a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3" fill="currentColor"></path> </svg> <svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg" class="theme-switch sun"> <title>切换到深色模式</title> <path d="M12 18a6 6 0 1 1 0-12a6 6 0 0 1 0 12m0-2a4 4 0 1 0 0-8a4 4 0 0 0 0 8M11 1h2v3h-2zm0 19h2v3h-2zM3.515 4.929l1.414-1.414L7.05 5.636L5.636 7.05zM16.95 18.364l1.414-1.414l2.121 2.121l-1.414 1.414zm2.121-14.85l1.414 1.415l-2.121 2.121l-1.414-1.414zM5.636 16.95l1.414 1.414l-2.121 2.121l-1.414-1.414zM23 11v2h-3v-2zM4 11v2H1v-2z" fill="currentColor"></path> </svg> <svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg" class="theme-switch moon"> <title>切换到浅色模式</title> <path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12S6.477 2 12 2h.1A6.98 6.98 0 0 0 10 7m-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938A8 8 0 0 0 4 12" fill="currentColor"></path> </svg> </header> <div class="markdown-body" id="app"> <aside id="content"><ul><li><a href="../../../grammar.html">语法</a></li><li><a href="../../../second.html">第二个页面</a></li><li><a href="../../../dfsdf/index.html">dfsdf</a><ul><li><a href="../../../dfsdf/gegegeg/index.html">gegegeg</a><ul><li><a href="../../../dfsdf/gegegeg/egeg.html">egeg</a></li></ul></li></ul></li><li><a href="../../../person/index.html">人</a><ul><li><a href="../../../person/head.html">头</a></li><li><a href="../../../person/body.html">身体</a></li><li><a href="../../../person/foot.html">脚</a></li></ul></li><li><a href="../../../新建文件夹/index.html">新建文件夹</a><ul><li><a href="../../../新建文件夹/01-intro.html">01-intro</a></li><li><a href="../../../新建文件夹/02-chinese/index.html">02-chinese</a><ul><li><a href="../../../新建文件夹/02-chinese/01-梦想励志类作文.html">01-梦想励志类作文</a></li><li><a href="../../../新建文件夹/02-chinese/02-议论文作文.html">02-议论文作文</a></li><li><a href="../../../新建文件夹/02-chinese/03-真情作文.html">03-真情作文</a></li><li><a href="../../../新建文件夹/02-chinese/04-书体特点.html">04-书体特点</a></li></ul></li><li><a href="../../../新建文件夹/03-math/index.html">03-math</a><ul><li><a href="../../../新建文件夹/03-math/01-相似三角形.html">01-相似三角形</a></li><li><a href="../../../新建文件夹/03-math/02-圆.html">02-圆</a></li><li><a href="../../../新建文件夹/03-math/03-二次函数.html">03-二次函数</a></li><li><a href="../../../新建文件夹/03-math/04-反比例函数.html">04-反比例函数</a></li></ul></li><li><a href="../../../新建文件夹/04-english/index.html">04-english</a><ul><li><a href="../../../新建文件夹/04-english/01-定语从句.html">01-定语从句</a></li><li><a href="../../../新建文件夹/04-english/02-开学考笔记.html">02-开学考笔记</a></li><li><a href="../../../新建文件夹/04-english/03-student-times/index.html">03-student-times</a><ul><li><a href="../../../新建文件夹/04-english/03-student-times/01.html">01</a></li><li><a href="../../../新建文件夹/04-english/03-student-times/02.html">02</a></li><li><a href="../../../新建文件夹/04-english/03-student-times/05.html">05</a></li></ul></li><li><a href="../../../新建文件夹/04-english/04-fit-english/index.html">04-fit-english</a><ul><li><a href="../../../新建文件夹/04-english/04-fit-english/06.html">06</a></li></ul></li></ul></li><li><a href="../../../新建文件夹/05-politics/index.html">05-politics</a><ul><li><a href="../../../新建文件夹/05-politics/01-九上政治提纲.html">01-九上政治提纲</a></li></ul></li><li><a href="../../../新建文件夹/06-history/index.html">06-history</a><ul><li><a href="../../../新建文件夹/06-history/01-八年级下册/index.html">01-八年级下册</a><ul><li><a href="../../../新建文件夹/06-history/01-八年级下册/01-中华人民共和国成立.html">01-中华人民共和国成立</a></li><li><a href="../../../新建文件夹/06-history/01-八年级下册/02-抗美援朝.html">02-抗美援朝</a></li><li><a href="../../../新建文件夹/06-history/01-八年级下册/03-土地改革.html">03-土地改革</a></li><li><a href="../../../新建文件夹/06-history/01-八年级下册/04-新中国工业化的起步和人民代表大会制度的确立.html">04-新中国工业化的起步和人民代表大会制度的确立</a></li><li><a href="../../../新建文件夹/06-history/01-八年级下册/05-三大改造.html">05-三大改造</a></li><li><a href="../../../新建文件夹/06-history/01-八年级下册/06-艰辛探索与建设成就.html">06-艰辛探索与建设成就</a></li><li><a href="../../../新建文件夹/06-history/01-八年级下册/07-伟大的历史转折.html">07-伟大的历史转折</a></li><li><a href="../../../新建文件夹/06-history/01-八年级下册/08-经济体制改革.html">08-经济体制改革</a></li></ul></li></ul></li><li><a href="../../../新建文件夹/07-physics/index.html">07-physics</a><ul><li><a href="../../../新建文件夹/07-physics/01-分子热运动.html">01-分子热运动</a></li><li><a href="../../../新建文件夹/07-physics/02-内能.html">02-内能</a></li></ul></li><li><a href="../../../新建文件夹/08-chemistry/index.html">08-chemistry</a><ul><li><a href="../../../新建文件夹/08-chemistry/01-初识化学.html">01-初识化学</a></li><li><a href="../../../新建文件夹/08-chemistry/02-走进化学实验室.html">02-走进化学实验室</a></li><li><a href="../../../新建文件夹/08-chemistry/03-实验探究初步.html">03-实验探究初步</a></li><li><a href="../../../新建文件夹/08-chemistry/04-空气和氧气.html">04-空气和氧气</a></li><li><a href="../../../新建文件夹/08-chemistry/05-氧气的制备综合.html">05-氧气的制备综合</a></li><li><a href="../../../新建文件夹/08-chemistry/06-物质的变化和性质.html">06-物质的变化和性质</a></li><li><a href="../../../新建文件夹/08-chemistry/07-化学常用知识.html">07-化学常用知识</a></li></ul></li><li><a href="../../../新建文件夹/09-codeing/index.html">09-codeing</a><ul><li><a href="../../../新建文件夹/09-codeing/01-html/index.html">01-html</a><ul><li><a href="../../../新建文件夹/09-codeing/01-html/01-HTML 语法.html">01-HTML 语法</a></li></ul></li><li><a href="../../../新建文件夹/09-codeing/03-javascript/index.html">03-javascript</a><ul><li><a href="../../../新建文件夹/09-codeing/03-javascript/01-scope 伪类.html">01-scope 伪类</a></li><li><a href="../../../新建文件夹/09-codeing/03-javascript/02-观察元素更改.html">02-观察元素更改</a></li><li><a href="../../../新建文件夹/09-codeing/03-javascript/03-修改文件访问时间、修改时间.html">03-修改文件访问时间、修改时间</a></li><li><a href="../../../新建文件夹/09-codeing/03-javascript/04-获得所有文件.html">04-获得所有文件</a></li><li><a href="../../../新建文件夹/09-codeing/03-javascript/05-获得数据类型.html">05-获得数据类型</a></li><li><a href="../../../新建文件夹/09-codeing/03-javascript/06-判断字体是否可用.html">06-判断字体是否可用</a></li><li><a href="../../../新建文件夹/09-codeing/03-javascript/07-统计中文.html">07-统计中文</a></li></ul></li><li><a href="../../../新建文件夹/09-codeing/04-crack/index.html">04-crack</a><ul><li><a href="../../../新建文件夹/09-codeing/04-crack/01-无限 debugger.html">01-无限 debugger</a></li><li><a href="../../../新建文件夹/09-codeing/04-crack/02-模拟输入.html">02-模拟输入</a></li><li><a href="../../../新建文件夹/09-codeing/04-crack/03-防止强制跳转.html">03-防止强制跳转</a></li></ul></li><li><a href="../../../新建文件夹/09-codeing/06-python/index.html">06-python</a><ul><li><a href="../../../新建文件夹/09-codeing/06-python/01-后台操作键鼠.html">01-后台操作键鼠</a></li><li><a href="../../../新建文件夹/09-codeing/06-python/02-OpenCV.html">02-OpenCV</a></li><li><a href="../../../新建文件夹/09-codeing/06-python/02-OpenCV_files/index.html">02-OpenCV_files</a><ul></ul></li></ul></li><li><a href="../../../新建文件夹/09-codeing/07-dart/index.html">07-dart</a><ul><li><a href="../../../新建文件夹/09-codeing/07-dart/01-线程管理.html">01-线程管理</a></li><li><a href="../../../新建文件夹/09-codeing/07-dart/02-字符分割.html">02-字符分割</a></li></ul></li><li><a href="../../../新建文件夹/09-codeing/08-nuxtjs/index.html">08-nuxtjs</a><ul><li><a href="../../../新建文件夹/09-codeing/08-nuxtjs/01-启动项目.html">01-启动项目</a></li></ul></li><li><a href="../../../新建文件夹/09-codeing/09-solidjs/index.html">09-solidjs</a><ul><li><a href="../../../新建文件夹/09-codeing/09-solidjs/01-why-solid.html">01-why-solid</a></li><li><a href="../../../新建文件夹/09-codeing/09-solidjs/03-solid-primitives.html">03-solid-primitives</a></li><li><a href="../../../新建文件夹/09-codeing/09-solidjs/04-typescript-for-solid.html">04-typescript-for-solid</a></li></ul></li><li><a href="../../../新建文件夹/09-codeing/10-cpp/index.html">10-cpp</a><ul><li><a href="../../../新建文件夹/09-codeing/10-cpp/01-basic-concepts/index.html">01-basic-concepts</a><ul><li><a href="../../../新建文件夹/09-codeing/10-cpp/01-basic-concepts/01-basic-concepts.html">01-basic-concepts</a></li><li><a href="../../../新建文件夹/09-codeing/10-cpp/01-basic-concepts/02-comment.html">02-comment</a></li><li><a href="../../../新建文件夹/09-codeing/10-cpp/01-basic-concepts/03-ascii.html">03-ascii</a></li><li><a href="../../../新建文件夹/09-codeing/10-cpp/01-basic-concepts/04-punctuators.html">04-punctuators</a></li><li><a href="../../../新建文件夹/09-codeing/10-cpp/01-basic-concepts/05-identifiers.html">05-identifiers</a></li></ul></li></ul></li><li><a href="../../../新建文件夹/09-codeing/11-utools/index.html">11-utools</a><ul><li><a href="../../../新建文件夹/09-codeing/11-utools/01-welcome.html">01-welcome</a></li><li><a href="../../../新建文件夹/09-codeing/11-utools/02-config.html">02-config</a></li><li><a href="../../../新建文件夹/09-codeing/11-utools/03-preload.html">03-preload</a></li><li><a href="../../../新建文件夹/09-codeing/11-utools/04-template.html">04-template</a></li><li><a href="../../../新建文件夹/09-codeing/11-utools/05-api.html">05-api</a></li><li><a href="../../../新建文件夹/09-codeing/11-utools/06-db.html">06-db</a></li><li><a href="../../../新建文件夹/09-codeing/11-utools/07-ubrowser.html">07-ubrowser</a></li><li><a href="../../../新建文件夹/09-codeing/11-utools/08-server-api.html">08-server-api</a></li><li><a href="../../../新建文件夹/09-codeing/11-utools/09-payment.html">09-payment</a></li><li><a href="../../../新建文件夹/09-codeing/11-utools/10-best.html">10-best</a></li></ul></li><li><a href="../../../新建文件夹/09-codeing/12-大师课/index.html">12-大师课</a><ul><li><a href="../../../新建文件夹/09-codeing/12-大师课/01-原理 事件循环.html">01-原理 事件循环</a></li><li><a href="../../../新建文件夹/09-codeing/12-大师课/02-原理 浏览器渲染原理.html">02-原理 浏览器渲染原理</a></li><li><a href="../../../新建文件夹/09-codeing/12-大师课/03-实战 歌词滚动效果.html">03-实战 歌词滚动效果</a></li><li><a href="../../../新建文件夹/09-codeing/12-大师课/04-实战 购物车效果.html">04-实战 购物车效果</a></li><li><a href="../../../新建文件夹/09-codeing/12-大师课/05-知识 属性描述符.html">05-知识 属性描述符</a></li><li><a href="../../../新建文件夹/09-codeing/12-大师课/06-框架 Vue 从入门到手撕.html">06-框架 Vue 从入门到手撕</a></li></ul></li><li><a href="../../../新建文件夹/09-codeing/13-dart-tutorials/index.html">13-dart-tutorials</a><ul><li><a href="../../../新建文件夹/09-codeing/13-dart-tutorials/01-variables.html">01-variables</a></li><li><a href="../../../新建文件夹/09-codeing/13-dart-tutorials/02-operators.html">02-operators</a></li></ul></li></ul></li><li><a href="../../../新建文件夹/10-technology/index.html">10-technology</a><ul><li><a href="../../../新建文件夹/10-technology/01-单文件制作/index.html">01-单文件制作</a><ul><li><a href="../../../新建文件夹/10-technology/01-单文件制作/01-单文件制作.html">01-单文件制作</a></li></ul></li><li><a href="../../../新建文件夹/10-technology/02-白嫖 Office 365/index.html">02-白嫖 Office 365</a><ul><li><a href="../../../新建文件夹/10-technology/02-白嫖 Office 365/02-白嫖 Office 365.html">02-白嫖 Office 365</a></li></ul></li><li><a href="../../../新建文件夹/10-technology/03-mp4-to-m3u8.html">03-mp4-to-m3u8</a></li><li><a href="../../../新建文件夹/10-technology/04-win11-concept-cursor/index.html">04-win11-concept-cursor</a><ul><li><a href="../../../新建文件夹/10-technology/04-win11-concept-cursor/04-win11-concept-cursor.html">04-win11-concept-cursor</a></li></ul></li><li><a href="../../../新建文件夹/10-technology/05-fira-code-font-download/index.html">05-fira-code-font-download</a><ul></ul></li><li><a href="../../../新建文件夹/10-technology/06-free-music/index.html">06-free-music</a><ul><li><a href="../../../新建文件夹/10-technology/06-free-music/06-free-music.html">06-free-music</a></li></ul></li><li><a href="../../../新建文件夹/10-technology/07-fast-download.html">07-fast-download</a></li><li><a href="../../../新建文件夹/10-technology/08-fiddler.html">08-fiddler</a></li><li><a href="../../../新建文件夹/10-technology/09-share-fanyi.html">09-share-fanyi</a></li><li><a href="../../../新建文件夹/10-technology/10-misans-font-download.html">10-misans-font-download</a></li><li><a href="../../../新建文件夹/10-technology/11-update-chrome-plugin.html">11-update-chrome-plugin</a></li></ul></li><li><a href="../../../新建文件夹/11-团校笔记/index.html">11-团校笔记</a><ul><li><a href="../../../新建文件夹/11-团校笔记/01.html">01</a></li><li><a href="../../../新建文件夹/11-团校笔记/02.html">02</a></li><li><a href="../../../新建文件夹/11-团校笔记/03.html">03</a></li><li><a href="../../../新建文件夹/11-团校笔记/04.html">04</a></li><li><a href="../../../新建文件夹/11-团校笔记/05.html">05</a></li><li><a href="../../../新建文件夹/11-团校笔记/06.html">06</a></li><li><a href="../../../新建文件夹/11-团校笔记/07.html">07</a></li></ul></li><li><a href="../../../新建文件夹/12-信息技术/index.html">12-信息技术</a><ul><li><a href="../../../新建文件夹/12-信息技术/01-动画制作初步.html">01-动画制作初步</a></li><li><a href="../../../新建文件夹/12-信息技术/02-信息与信息处理.html">02-信息与信息处理</a></li><li><a href="../../../新建文件夹/12-信息技术/03-数据的分析与处理.html">03-数据的分析与处理</a></li><li><a href="../../../新建文件夹/12-信息技术/04-制作多媒体作品.html">04-制作多媒体作品</a></li><li><a href="../../../新建文件夹/12-信息技术/05-程序设计初步.html">05-程序设计初步</a></li><li><a href="../../../新建文件夹/12-信息技术/06-网络基础及应用.html">06-网络基础及应用</a></li><li><a href="../../../新建文件夹/12-信息技术/07-App Inventor 手机积木式编程.html">07-App Inventor 手机积木式编程</a></li></ul></li><li><a href="../../../新建文件夹/13-大师课/index.html">13-大师课</a><ul><li><a href="../../../新建文件夹/13-大师课/01-原理-事件循环.html">01-原理-事件循环</a></li></ul></li></ul></li></ul></aside> <main class="markdown-body" id="main"><hr> <h2 id="last_updatedate-1696414629447" tabindex="-1">last_update: date: 1696414629447<a href="#last_updatedate-1696414629447" class="header-anchor">#</a></h2> <h2 id="导包" tabindex="-1">导包<a href="#导包" class="header-anchor">#</a></h2> <pre><code class="hljs lang-python">%matplotlib inline
%config InlineBackend.figure_format=<span class="hljs-string">'svg'</span> <span class="hljs-comment"># 输出矢量图</span>

<span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt

plt.rcParams[<span class="hljs-string">'font.sans-serif'</span>] = [<span class="hljs-string">'SimHei'</span>] <span class="hljs-comment"># 防中文乱码</span>
</code></pre> <h2 id="定义图像显示函数" tabindex="-1">定义图像显示函数<a href="#定义图像显示函数" class="header-anchor">#</a></h2> <pre><code class="hljs lang-python"><span class="hljs-keyword">def</span> <span class="function_ hljs-title">cv_show</span>(<span class="hljs-params">name, img, delay=<span class="hljs-number">0</span></span>):
    cv2.imshow(name, img)
    cv2.waitKey(delay)
    cv2.destroyAllWindows()
<span class="hljs-keyword">def</span> <span class="function_ hljs-title">plt_show</span>(<span class="hljs-params">img, name = <span class="hljs-string">''</span>, subplot = <span class="hljs-number">111</span></span>):
    plt.subplot(subplot)
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(img.shape) == <span class="hljs-number">3</span>:
        plt.imshow(img[:, :, ::-<span class="hljs-number">1</span>])
    <span class="hljs-keyword">else</span>:
        plt.imshow(img, cmap=<span class="hljs-string">'gray'</span>)
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(name) &gt; <span class="hljs-number">0</span>:
        plt.title(name)
</code></pre> <h2 id="读取图像" tabindex="-1">读取图像<a href="#读取图像" class="header-anchor">#</a></h2> <pre><code class="hljs lang-python"><span class="hljs-comment"># 读取彩色图</span>
img = cv2.imread(<span class="hljs-string">'cat.png'</span>)

<span class="hljs-comment"># 读取灰度图</span>
<span class="hljs-comment"># img = cv2.imread('cat.png', cv2.IMREAD_GRAYSCALE)</span>
</code></pre> <h2 id="常用方法" tabindex="-1">常用方法<a href="#常用方法" class="header-anchor">#</a></h2> <h3 id="获得图片尺寸" tabindex="-1">获得图片尺寸<a href="#获得图片尺寸" class="header-anchor">#</a></h3> <pre><code class="hljs lang-python">img.shape <span class="hljs-comment"># [高度 h, 宽度 w, 颜色 c]</span>
</code></pre> <pre><code>(600, 960, 3)
</code></pre> <h3 id="修改图片尺寸" tabindex="-1">修改图片尺寸<a href="#修改图片尺寸" class="header-anchor">#</a></h3> <pre><code class="hljs lang-python">cv2.resize(img, (<span class="hljs-number">512</span>, <span class="hljs-number">512</span>))
cv2.resize(img, (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), fx=<span class="hljs-number">2</span>, fy=<span class="hljs-number">3</span>) <span class="hljs-comment"># x 轴放大 2 倍，y 轴放大 3 倍</span>

plt_show(img, <span class="hljs-string">'原图'</span>, <span class="hljs-number">221</span>)
plt_show(cv2.resize(img, (<span class="hljs-number">100</span>, <span class="hljs-number">200</span>)), <span class="hljs-string">'100x200'</span>, <span class="hljs-number">222</span>)
plt_show(cv2.resize(img, (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), fx=<span class="hljs-number">2</span>, fy=<span class="hljs-number">3</span>), <span class="hljs-string">'fx=2, fy=3'</span>, <span class="hljs-number">223</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_10_0.svg"></p> <h3 id="显示图片" tabindex="-1">显示图片<a href="#显示图片" class="header-anchor">#</a></h3> <pre><code class="hljs lang-python"><span class="hljs-comment"># cv_show('img', img)</span>
plt_show(img, <span class="hljs-string">'img'</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_12_0.svg"></p> <h3 id="截取部分图像数据" tabindex="-1">截取部分图像数据<a href="#截取部分图像数据" class="header-anchor">#</a></h3> <pre><code class="hljs lang-python">img[<span class="hljs-number">60</span>:<span class="hljs-number">260</span>, <span class="hljs-number">230</span>:<span class="hljs-number">470</span>] <span class="hljs-comment"># h: 200, w: 240</span>

plt_show(img[<span class="hljs-number">60</span>:<span class="hljs-number">260</span>, <span class="hljs-number">230</span>:<span class="hljs-number">470</span>], <span class="hljs-string">'img[60:260, 230:470]'</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_14_0.svg"></p> <h3 id="颜色通道提取" tabindex="-1">颜色通道提取<a href="#颜色通道提取" class="header-anchor">#</a></h3> <pre><code class="hljs lang-python">b, g, r = cv2.split(img)
</code></pre> <h3 id="合并颜色通道" tabindex="-1">合并颜色通道<a href="#合并颜色通道" class="header-anchor">#</a></h3> <pre><code class="hljs lang-python">img = cv2.merge((b, g, r))
</code></pre> <h3 id="复制图片" tabindex="-1">复制图片<a href="#复制图片" class="header-anchor">#</a></h3> <pre><code class="hljs lang-python">plt_show(img.copy(), <span class="hljs-string">'img.copy'</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_20_0.svg"></p> <h3 id="删除指定颜色通道" tabindex="-1">删除指定颜色通道<a href="#删除指定颜色通道" class="header-anchor">#</a></h3> <pre><code class="hljs lang-python">red_cat = img.copy()
red_cat[:, :, <span class="hljs-number">0</span>] = <span class="hljs-number">0</span> <span class="hljs-comment"># b</span>
red_cat[:, :, <span class="hljs-number">1</span>] = <span class="hljs-number">0</span> <span class="hljs-comment"># g</span>

green_cat = img.copy()
green_cat[:, :, <span class="hljs-number">0</span>] = <span class="hljs-number">0</span> <span class="hljs-comment"># b</span>
green_cat[:, :, <span class="hljs-number">2</span>] = <span class="hljs-number">0</span> <span class="hljs-comment"># r</span>

blue_cat = img.copy()
blue_cat[:, :, <span class="hljs-number">1</span>] = <span class="hljs-number">0</span> <span class="hljs-comment"># g</span>
blue_cat[:, :, <span class="hljs-number">2</span>] = <span class="hljs-number">0</span> <span class="hljs-comment"># r</span>

plt_show(img,<span class="hljs-string">'原图'</span>, <span class="hljs-number">221</span>)
plt_show(red_cat,<span class="hljs-string">'R 通道'</span>, <span class="hljs-number">222</span>)
plt_show(green_cat,<span class="hljs-string">'G 通道'</span>, <span class="hljs-number">223</span>)
plt_show(blue_cat,<span class="hljs-string">'B 通道'</span>, <span class="hljs-number">224</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_22_0.svg"></p> <h3 id="边界填充" tabindex="-1">边界填充<a href="#边界填充" class="header-anchor">#</a></h3> <pre><code class="hljs lang-python">top, bottom, left, right = (<span class="hljs-number">200</span>, <span class="hljs-number">200</span>, <span class="hljs-number">200</span>, <span class="hljs-number">200</span>)
replicate = cv2.copyMakeBorder(img, top, bottom, left, right, cv2.BORDER_REPLICATE)
reflect = cv2.copyMakeBorder(img, top, bottom, left, right, cv2.BORDER_REFLECT)
reflect101 = cv2.copyMakeBorder(img, top, bottom, left, right, cv2.BORDER_REFLECT_101)
wrap = cv2.copyMakeBorder(img, top, bottom, left, right, cv2.BORDER_WRAP)
constant = cv2.copyMakeBorder(img, top, bottom, left, right, cv2.BORDER_CONSTANT, value=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>)) <span class="hljs-comment"># value=(b, g, r)</span>

plt_show(img, <span class="hljs-string">'原图'</span>, <span class="hljs-number">231</span>)
plt_show(replicate, <span class="hljs-string">'REPLICATE'</span>, <span class="hljs-number">232</span>)
plt_show(reflect, <span class="hljs-string">'REFLECT'</span>, <span class="hljs-number">233</span>)
plt_show(reflect101, <span class="hljs-string">'REFLECT_101'</span>, <span class="hljs-number">234</span>)
plt_show(wrap, <span class="hljs-string">'WRAP'</span>, <span class="hljs-number">235</span>)
plt_show(constant, <span class="hljs-string">'CONSTANT'</span>, <span class="hljs-number">236</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_24_0.svg"></p> <ul> <li>BORDER_REPLICATE：复制法，也就是复制最边缘像素；</li> <li>BORDER_REFLECT：反射法，对感兴趣的图像中的像素在两边进行复制，<code>hgfedcba|abcdefgh|hgfedcba</code>；</li> <li>BORDER_REFLECT_1O1：反射法，也就是以最边缘像素为轴，对称，<code>hfedcb|abcdefgh|gfedcba</code></li> <li>BORDER_WRAP：外包装法，<code>abcdefgh|abcdefgh|abcdefgh</code></li> <li>BORDER_CONSTANT：常量法，常数值填充。</li> </ul> <h3 id="数值计算" tabindex="-1">数值计算<a href="#数值计算" class="header-anchor">#</a></h3> <h4 id="使用-numpy-进行数值计算" tabindex="-1">使用 numpy 进行数值计算<a href="#使用-numpy-进行数值计算" class="header-anchor">#</a></h4> <pre><code class="hljs lang-python">plt_show(img + <span class="hljs-number">50</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_28_0.svg"></p> <pre><code class="hljs lang-python">img[:<span class="hljs-number">5</span>, :, <span class="hljs-number">0</span>]
</code></pre> <pre><code>array([[ 70,  69,  68, ..., 115, 115, 115],
       [ 72,  71,  69, ..., 115, 116, 116],
       [ 72,  71,  70, ..., 116, 117, 118],
       [ 71,  71,  70, ..., 117, 117, 118],
       [ 71,  71,  70, ..., 117, 117, 116]], dtype=uint8)
</code></pre> <pre><code class="hljs lang-python"><span class="hljs-comment"># 超过 255 会自动求余，相当于 % 256</span>
(img + <span class="hljs-number">70</span>)[:<span class="hljs-number">5</span>, :, <span class="hljs-number">0</span>]
</code></pre> <pre><code>array([[140, 139, 138, ..., 185, 185, 185],
       [142, 141, 139, ..., 185, 186, 186],
       [142, 141, 140, ..., 186, 187, 188],
       [141, 141, 140, ..., 187, 187, 188],
       [141, 141, 140, ..., 187, 187, 186]], dtype=uint8)
</code></pre> <pre><code class="hljs lang-python"><span class="hljs-comment"># 同尺寸图片可以相加</span>
(img + img.copy())[:<span class="hljs-number">5</span>, :, <span class="hljs-number">0</span>]
</code></pre> <pre><code>array([[140, 138, 136, ..., 230, 230, 230],
       [144, 142, 138, ..., 230, 232, 232],
       [144, 142, 140, ..., 232, 234, 236],
       [142, 142, 140, ..., 234, 234, 236],
       [142, 142, 140, ..., 234, 234, 232]], dtype=uint8)
</code></pre> <h4 id="使用-opencv-进行数值计算" tabindex="-1">使用 OpenCV 进行数值计算<a href="#使用-opencv-进行数值计算" class="header-anchor">#</a></h4> <pre><code class="hljs lang-python">plt_show(cv2.add(img, -<span class="hljs-number">50</span>), <span class="hljs-string">'-50'</span>, <span class="hljs-number">221</span>)
plt_show(img, <span class="hljs-string">'原图'</span>, <span class="hljs-number">222</span>)
plt_show(cv2.add(img, <span class="hljs-number">50</span>), <span class="hljs-string">'+50'</span>, <span class="hljs-number">223</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_33_0.svg"></p> <pre><code class="hljs lang-python">img[:<span class="hljs-number">5</span>, :, <span class="hljs-number">0</span>]
</code></pre> <pre><code>array([[ 70,  69,  68, ..., 115, 115, 115],
       [ 72,  71,  69, ..., 115, 116, 116],
       [ 72,  71,  70, ..., 116, 117, 118],
       [ 71,  71,  70, ..., 117, 117, 118],
       [ 71,  71,  70, ..., 117, 117, 116]], dtype=uint8)
</code></pre> <pre><code class="hljs lang-python"><span class="hljs-comment"># 超过 255 则为 255</span>
cv2.add(img, <span class="hljs-number">70</span>)[:<span class="hljs-number">5</span>, :, <span class="hljs-number">0</span>]
</code></pre> <pre><code>array([[140, 139, 138, ..., 185, 185, 185],
       [142, 141, 139, ..., 185, 186, 186],
       [142, 141, 140, ..., 186, 187, 188],
       [141, 141, 140, ..., 187, 187, 188],
       [141, 141, 140, ..., 187, 187, 186]], dtype=uint8)
</code></pre> <h3 id="图像阈值" tabindex="-1">图像阈值<a href="#图像阈值" class="header-anchor">#</a></h3> <ul> <li>src：输入图，只能输入单通道图像，通常来说为灰度图</li> <li>dst：输出图</li> <li>thresh：阈值</li> <li>maxval：当像素值超过了阈值（或者小于阈值，根据 type 来决定），所赋予的值</li> <li>type：二值化操作的类型 <ul> <li><code>cv2.THRESH_BINARY</code> 超过阈值部分取 <code>maxval</code>（最大值），否则取 <code>0</code></li> <li><code>cv2.THRESH_BINARY_INV</code> <code>THRESH_BINARY</code> 的反转</li> <li><code>cv2.THRESH_TRUNC</code> 大于阈值部分设为阈值，否则不变</li> <li><code>cv2.THRESH_TOZERO</code> 大于阈值部分不改变，否则设为 <code>0</code></li> <li><code>cv2.THRESH_TOZERO_INV</code> <code>THRESH_TOZERO</code> 的反转</li> </ul> </li> </ul> <pre><code class="hljs lang-python">img_gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

ret, thresh1 = cv2.threshold(img_gray, <span class="hljs-number">127</span>, <span class="hljs-number">255</span>, cv2.THRESH_BINARY)
ret, thresh2 = cv2.threshold(img_gray, <span class="hljs-number">127</span>, <span class="hljs-number">255</span>, cv2.THRESH_BINARY_INV)
ret, thresh3 = cv2.threshold(img_gray, <span class="hljs-number">127</span>, <span class="hljs-number">255</span>, cv2.THRESH_TRUNC)
ret, thresh4 = cv2.threshold(img_gray, <span class="hljs-number">127</span>, <span class="hljs-number">255</span>, cv2.THRESH_TOZERO)
ret, thresh5 = cv2.threshold(img_gray, <span class="hljs-number">127</span>, <span class="hljs-number">255</span>, cv2.THRESH_TOZERO_INV)

plt_show(img_gray, <span class="hljs-string">'原图'</span>, <span class="hljs-number">231</span>)
plt_show(thresh1, <span class="hljs-string">'THRESH_BINARY'</span>, <span class="hljs-number">232</span>)
plt_show(thresh2, <span class="hljs-string">'THRESH_BINARY_INV'</span>, <span class="hljs-number">233</span>)
plt_show(thresh3, <span class="hljs-string">'THRESH_TRUNC'</span>, <span class="hljs-number">234</span>)
plt_show(thresh4, <span class="hljs-string">'THRESH_TOZERO'</span>, <span class="hljs-number">235</span>)
plt_show(thresh5, <span class="hljs-string">'THRESH_TOZERO_INV'</span>, <span class="hljs-number">236</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_37_0.svg"></p> <h3 id="图片融合" tabindex="-1">图片融合<a href="#图片融合" class="header-anchor">#</a></h3> <pre><code class="hljs lang-python">img_dog = cv2.imread(<span class="hljs-string">'dog.jpg'</span>)
img_dog = cv2.resize(img_dog, (img.shape[<span class="hljs-number">1</span>], img.shape[<span class="hljs-number">0</span>]))

plt_show(cv2.addWeighted(img, <span class="hljs-number">0.4</span>, img_dog, <span class="hljs-number">0.6</span>, <span class="hljs-number">0</span>))
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_39_0.svg"></p> <h3 id="形态学" tabindex="-1">形态学<a href="#形态学" class="header-anchor">#</a></h3> <h4 id="腐蚀操作" tabindex="-1">腐蚀操作<a href="#腐蚀操作" class="header-anchor">#</a></h4> <pre><code class="hljs lang-python">img_dege = cv2.imread(<span class="hljs-string">'dege.png'</span>)
<span class="hljs-comment"># 卷积核大小 3x3</span>
kernel = np.ones((<span class="hljs-number">3</span>, <span class="hljs-number">3</span>), np.uint8)
<span class="hljs-comment"># 迭代次数为 1</span>
img_erode = cv2.erode(img_dege, kernel, iterations=<span class="hljs-number">2</span>)

plt_show(img_dege, <span class="hljs-string">'原图'</span>, <span class="hljs-number">121</span>)
plt_show(img_erode, <span class="hljs-string">'腐蚀'</span>, <span class="hljs-number">122</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_42_0.svg"></p> <h4 id="膨胀操作" tabindex="-1">膨胀操作<a href="#膨胀操作" class="header-anchor">#</a></h4> <pre><code class="hljs lang-python">img_dilate = cv2.dilate(img_dege, kernel, iterations=<span class="hljs-number">2</span>)
img_dilate2 = cv2.dilate(img_erode, kernel, iterations=<span class="hljs-number">2</span>)

plt_show(img_dege, <span class="hljs-string">'原图'</span>, <span class="hljs-number">221</span>)
plt_show(img_erode, <span class="hljs-string">'腐蚀'</span>, <span class="hljs-number">222</span>)
plt_show(img_dilate, <span class="hljs-string">'膨胀'</span>, <span class="hljs-number">223</span>)
plt_show(img_dilate2, <span class="hljs-string">'膨胀'</span>, <span class="hljs-number">224</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_44_0.svg"></p> <h4 id="开运算与闭运算" tabindex="-1">开运算与闭运算<a href="#开运算与闭运算" class="header-anchor">#</a></h4> <ul> <li>开运算：先腐蚀，再膨胀</li> <li>闭运算：先膨胀，再腐蚀</li> </ul> <pre><code class="hljs lang-python"><span class="hljs-comment"># 开运算</span>
opening = cv2.morphologyEx(img_dege, cv2.MORPH_OPEN, kernel)
<span class="hljs-comment"># 闭运算</span>
closing = cv2.morphologyEx(img_dege, cv2.MORPH_CLOSE, kernel)

plt_show(img_dege, <span class="hljs-string">'原图'</span>, <span class="hljs-number">221</span>)
plt_show(opening, <span class="hljs-string">'开运算'</span>, <span class="hljs-number">222</span>)
plt_show(closing, <span class="hljs-string">'闭运算'</span>, <span class="hljs-number">223</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_46_0.svg"></p> <h4 id="梯度运算" tabindex="-1">梯度运算<a href="#梯度运算" class="header-anchor">#</a></h4> <pre><code class="hljs lang-python">gradient = cv2.morphologyEx(img_dege, cv2.MORPH_GRADIENT, kernel)

plt_show(img_dege, <span class="hljs-string">'原图'</span>, <span class="hljs-number">221</span>)
plt_show(gradient, <span class="hljs-string">'梯度图'</span>, <span class="hljs-number">222</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_48_0.svg"></p> <h4 id="礼帽与黑帽" tabindex="-1">礼帽与黑帽<a href="#礼帽与黑帽" class="header-anchor">#</a></h4> <ul> <li>礼帽 = 原始输入 - 开运算结果</li> <li>黑帽 = 闭运算结果 - 原始输入</li> </ul> <pre><code class="hljs lang-python"><span class="hljs-comment"># 礼帽</span>
tophat = cv2.morphologyEx(img_dege, cv2.MORPH_TOPHAT, kernel)
<span class="hljs-comment"># 黑帽</span>
blackhat = cv2.morphologyEx(img_dege, cv2.MORPH_BLACKHAT, kernel)

plt_show(img_dege, <span class="hljs-string">'原图'</span>, <span class="hljs-number">221</span>)
plt_show(tophat, <span class="hljs-string">'礼帽'</span>, <span class="hljs-number">222</span>)
plt_show(blackhat, <span class="hljs-string">'黑帽'</span>, <span class="hljs-number">223</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_50_0.svg"></p> <h2 id="梯度运算-1" tabindex="-1">梯度运算<a href="#梯度运算-1" class="header-anchor">#</a></h2> <h3 id="sobel-算子" tabindex="-1">Sobel 算子<a href="#sobel-算子" class="header-anchor">#</a></h3> <p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>G</mi><mi>x</mi></msub><mo>=</mo><mrow><mo fence="true">[</mo><mtable columnalign="center center center" columnspacing="1em" rowspacing="0.16em"><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>−</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>+</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>−</mo><mn>2</mn></mrow></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>+</mo><mn>2</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>−</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>+</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>∗</mo><mi>A</mi></mrow><annotation encoding="application/x-tex"> G_x = \left [ \begin{matrix} -1 &amp; 0 &amp; +1 \\ -2 &amp; 0 &amp; +2 \\ -1 &amp; 0 &amp; +1 \\ \end{matrix} \right ] * A </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="mtight reset-size6 size3 sizing"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.05em"><span class="pstrut" style="height:5.6em"></span><span style="width:.667em;height:3.6em"><svg height="3.600em" viewBox="0 0 667 3600" width="0.667em" xmlns="http://www.w3.org/2000/svg"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord">2</span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span><span class="arraycolsep" style="width:.5em"></span><span class="arraycolsep" style="width:.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span><span class="arraycolsep" style="width:.5em"></span><span class="arraycolsep" style="width:.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">+</span><span class="mord">1</span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">+</span><span class="mord">2</span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">+</span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.05em"><span class="pstrut" style="height:5.6em"></span><span style="width:.667em;height:3.6em"><svg height="3.600em" viewBox="0 0 667 3600" width="0.667em" xmlns="http://www.w3.org/2000/svg"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v0 v1759 h84z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal">A</span></span></span></span></span></p> <p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>G</mi><mi>y</mi></msub><mo>=</mo><mrow><mo fence="true">[</mo><mtable columnalign="center center center" columnspacing="1em" rowspacing="0.16em"><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>−</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>−</mo><mn>2</mn></mrow></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>−</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>+</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>+</mo><mn>2</mn></mrow></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>+</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>∗</mo><mi>A</mi></mrow><annotation encoding="application/x-tex"> G_y = \left [ \begin{matrix} -1 &amp; -2 &amp; -1 \\ 0 &amp; 0 &amp; 0 \\ +1 &amp; +2 &amp; +1 \\ \end{matrix} \right ] * A </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9694em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="mtight reset-size6 size3 sizing"><span class="mord mathnormal mtight" style="margin-right:.03588em">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.05em"><span class="pstrut" style="height:5.6em"></span><span style="width:.667em;height:3.6em"><svg height="3.600em" viewBox="0 0 667 3600" width="0.667em" xmlns="http://www.w3.org/2000/svg"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">+</span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span><span class="arraycolsep" style="width:.5em"></span><span class="arraycolsep" style="width:.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord">2</span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">+</span><span class="mord">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span><span class="arraycolsep" style="width:.5em"></span><span class="arraycolsep" style="width:.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">+</span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.05em"><span class="pstrut" style="height:5.6em"></span><span style="width:.667em;height:3.6em"><svg height="3.600em" viewBox="0 0 667 3600" width="0.667em" xmlns="http://www.w3.org/2000/svg"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v0 v1759 h84z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal">A</span></span></span></span></span></p> <pre><code class="hljs lang-py">cv2.Sobel(输入图像, 图像位深度, 水平方向, 竖直方向, ksize=卷积核大小)
</code></pre> <pre><code class="hljs lang-python">lena = cv2.imread(<span class="hljs-string">'lena.png'</span>, cv2.IMREAD_GRAYSCALE)

lena_gradient = cv2.morphologyEx(lena, cv2.MORPH_GRADIENT, kernel)

gx = cv2.Sobel(lena, cv2.CV_64F, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, ksize=<span class="hljs-number">3</span>)
gx = cv2.convertScaleAbs(gx)
gy = cv2.Sobel(lena, cv2.CV_64F, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, ksize=<span class="hljs-number">3</span>)
gy = cv2.convertScaleAbs(gy)
gxy = cv2.Sobel(lena, cv2.CV_64F, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, ksize=<span class="hljs-number">3</span>)
gxy = cv2.convertScaleAbs(gxy)
lena_gradient_sobel = cv2.addWeighted(gx, <span class="hljs-number">0.5</span>, gy, <span class="hljs-number">0.5</span>, <span class="hljs-number">0</span>)

plt_show(lena, <span class="hljs-string">'原图'</span>, <span class="hljs-number">231</span>)
plt_show(lena_gradient, <span class="hljs-string">'梯度图'</span>, <span class="hljs-number">232</span>)
plt_show(gx, <span class="hljs-string">'gx'</span>, <span class="hljs-number">233</span>)
plt_show(gy, <span class="hljs-string">'gy'</span>, <span class="hljs-number">234</span>)
plt_show(lena_gradient_sobel, <span class="hljs-string">'先算 xy，后合成'</span>, <span class="hljs-number">235</span>)
plt_show(lena_gradient_sobel, <span class="hljs-string">'同时计算 xy'</span>, <span class="hljs-number">236</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_53_0.svg"></p> <pre><code class="hljs lang-python">gx = cv2.Sobel(img_dege, cv2.CV_64F, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, ksize=<span class="hljs-number">3</span>)
gx = cv2.convertScaleAbs(gx)
gy = cv2.Sobel(img_dege, cv2.CV_64F, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, ksize=<span class="hljs-number">3</span>)
gy = cv2.convertScaleAbs(gy)
gxy = cv2.Sobel(img_dege, cv2.CV_64F, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, ksize=<span class="hljs-number">3</span>)
gxy = cv2.convertScaleAbs(gxy)
img_dege_gradient_sobel = cv2.addWeighted(gx, <span class="hljs-number">0.5</span>, gy, <span class="hljs-number">0.5</span>, <span class="hljs-number">0</span>)

plt_show(img_dege, <span class="hljs-string">'原图'</span>, <span class="hljs-number">231</span>)
plt_show(gradient, <span class="hljs-string">'梯度图'</span>, <span class="hljs-number">232</span>)
plt_show(gx, <span class="hljs-string">'gx'</span>, <span class="hljs-number">233</span>)
plt_show(gy, <span class="hljs-string">'gy'</span>, <span class="hljs-number">234</span>)
plt_show(img_dege_gradient_sobel, <span class="hljs-string">'先算 xy，后合成'</span>, <span class="hljs-number">235</span>)
plt_show(gxy, <span class="hljs-string">'同时计算 xy'</span>, <span class="hljs-number">236</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_54_0.svg"></p> <h3 id="scharr-算子" tabindex="-1">Scharr 算子<a href="#scharr-算子" class="header-anchor">#</a></h3> <p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>G</mi><mi>x</mi></msub><mo>=</mo><mrow><mo fence="true">[</mo><mtable columnalign="center center center" columnspacing="1em" rowspacing="0.16em"><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>−</mo><mn>3</mn></mrow></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>+</mo><mn>3</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>−</mo><mn>10</mn></mrow></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>+</mo><mn>10</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>−</mo><mn>3</mn></mrow></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>+</mo><mn>3</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>∗</mo><mi>A</mi></mrow><annotation encoding="application/x-tex"> G_x = \left [ \begin{matrix} -3 &amp; 0 &amp; +3 \\ -10 &amp; 0 &amp; +10 \\ -3 &amp; 0 &amp; +3 \\ \end{matrix} \right ] * A </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="mtight reset-size6 size3 sizing"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.05em"><span class="pstrut" style="height:5.6em"></span><span style="width:.667em;height:3.6em"><svg height="3.600em" viewBox="0 0 667 3600" width="0.667em" xmlns="http://www.w3.org/2000/svg"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord">3</span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord">10</span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span><span class="arraycolsep" style="width:.5em"></span><span class="arraycolsep" style="width:.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span><span class="arraycolsep" style="width:.5em"></span><span class="arraycolsep" style="width:.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">+</span><span class="mord">3</span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">+</span><span class="mord">10</span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">+</span><span class="mord">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.05em"><span class="pstrut" style="height:5.6em"></span><span style="width:.667em;height:3.6em"><svg height="3.600em" viewBox="0 0 667 3600" width="0.667em" xmlns="http://www.w3.org/2000/svg"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v0 v1759 h84z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal">A</span></span></span></span></span></p> <p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>G</mi><mi>y</mi></msub><mo>=</mo><mrow><mo fence="true">[</mo><mtable columnalign="center center center" columnspacing="1em" rowspacing="0.16em"><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>−</mo><mn>3</mn></mrow></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>−</mo><mn>10</mn></mrow></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>−</mo><mn>3</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>+</mo><mn>3</mn></mrow></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>+</mo><mn>10</mn></mrow></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>+</mo><mn>3</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>∗</mo><mi>A</mi></mrow><annotation encoding="application/x-tex"> G_y = \left [ \begin{matrix} -3 &amp; -10 &amp; -3 \\ 0 &amp; 0 &amp; 0 \\ +3 &amp; +10 &amp; +3 \\ \end{matrix} \right ] * A </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9694em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="mtight reset-size6 size3 sizing"><span class="mord mathnormal mtight" style="margin-right:.03588em">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.05em"><span class="pstrut" style="height:5.6em"></span><span style="width:.667em;height:3.6em"><svg height="3.600em" viewBox="0 0 667 3600" width="0.667em" xmlns="http://www.w3.org/2000/svg"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord">3</span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">+</span><span class="mord">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span><span class="arraycolsep" style="width:.5em"></span><span class="arraycolsep" style="width:.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord">10</span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">+</span><span class="mord">10</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span><span class="arraycolsep" style="width:.5em"></span><span class="arraycolsep" style="width:.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord">3</span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">+</span><span class="mord">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.05em"><span class="pstrut" style="height:5.6em"></span><span style="width:.667em;height:3.6em"><svg height="3.600em" viewBox="0 0 667 3600" width="0.667em" xmlns="http://www.w3.org/2000/svg"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v0 v1759 h84z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal">A</span></span></span></span></span></p> <p>特点：比 Sobel 算子更敏感</p> <pre><code class="hljs lang-py">cv2.Scharr(输入图像, 图像位深度, 水平方向, 竖直方向)
</code></pre> <pre><code class="hljs lang-python">gx = cv2.Scharr(lena, cv2.CV_64F, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)
gx = cv2.convertScaleAbs(gx)
gy = cv2.Scharr(lena, cv2.CV_64F, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>)
gy = cv2.convertScaleAbs(gy)
lena_gradient_scharr = cv2.addWeighted(gx, <span class="hljs-number">0.5</span>, gy, <span class="hljs-number">0.5</span>, <span class="hljs-number">0</span>)

plt_show(lena, <span class="hljs-string">'原图'</span>, <span class="hljs-number">231</span>)
plt_show(lena_gradient, <span class="hljs-string">'梯度图'</span>, <span class="hljs-number">232</span>)
plt_show(gx, <span class="hljs-string">'gx'</span>, <span class="hljs-number">233</span>)
plt_show(gy, <span class="hljs-string">'gy'</span>, <span class="hljs-number">234</span>)
plt_show(lena_gradient_scharr, <span class="hljs-string">'Scharr 算子'</span>, <span class="hljs-number">235</span>)
plt_show(lena_gradient_sobel, <span class="hljs-string">'Sobel 算子'</span>, <span class="hljs-number">236</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_56_0.svg"></p> <h3 id="laplacian-算子" tabindex="-1">Laplacian 算子<a href="#laplacian-算子" class="header-anchor">#</a></h3> <p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable columnalign="center center center" columnspacing="1em" rowspacing="0.16em"><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>1</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>1</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mrow><mo>−</mo><mn>4</mn></mrow></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>1</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex"> G = \left [ \begin{matrix} 0 &amp; 1 &amp; 0 \\ 1 &amp; -4 &amp; 1 \\ 0 &amp; 1 &amp; 0 \\ \end{matrix} \right ] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal">G</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.05em"><span class="pstrut" style="height:5.6em"></span><span style="width:.667em;height:3.6em"><svg height="3.600em" viewBox="0 0 667 3600" width="0.667em" xmlns="http://www.w3.org/2000/svg"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span><span class="arraycolsep" style="width:.5em"></span><span class="arraycolsep" style="width:.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">−</span><span class="mord">4</span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span><span class="arraycolsep" style="width:.5em"></span><span class="arraycolsep" style="width:.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.05em"><span class="pstrut" style="height:5.6em"></span><span style="width:.667em;height:3.6em"><svg height="3.600em" viewBox="0 0 667 3600" width="0.667em" xmlns="http://www.w3.org/2000/svg"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v0 v1759 h84z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span></span></span></span></span></span></span></p> <p>特点：对噪点敏感</p> <pre><code class="hljs lang-py">cv2.Laplacian(输入图像, 图像位深度)
</code></pre> <pre><code class="hljs lang-python">lena_gradient_laplacian = cv2.Laplacian(lena, cv2.CV_64F)
lena_gradient_laplacian = cv2.convertScaleAbs(lena_gradient_laplacian)

plt_show(lena, <span class="hljs-string">'原图'</span>, <span class="hljs-number">231</span>)
plt_show(lena_gradient, <span class="hljs-string">'梯度图'</span>, <span class="hljs-number">232</span>)
plt_show(lena_gradient_scharr, <span class="hljs-string">'Scharr 算子'</span>, <span class="hljs-number">233</span>)
plt_show(lena_gradient_sobel, <span class="hljs-string">'Sobel 算子'</span>, <span class="hljs-number">234</span>)
plt_show(lena_gradient_laplacian, <span class="hljs-string">'Laplacian 算子'</span>, <span class="hljs-number">235</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_58_0.svg"></p> <h2 id="图像平滑" tabindex="-1">图像平滑<a href="#图像平滑" class="header-anchor">#</a></h2> <h3 id="均值滤波" tabindex="-1">均值滤波<a href="#均值滤波" class="header-anchor">#</a></h3> <pre><code class="hljs lang-python">lena_Noise = cv2.imread(<span class="hljs-string">'lenaNoise.png'</span>)

blur = cv2.blur(lena_Noise, (<span class="hljs-number">9</span>, <span class="hljs-number">9</span>))

plt_show(lena_Noise, <span class="hljs-string">'原图'</span>, <span class="hljs-number">121</span>)
plt_show(blur, <span class="hljs-string">'均值滤波'</span>, <span class="hljs-number">122</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_61_0.svg"></p> <h3 id="方框滤波" tabindex="-1">方框滤波<a href="#方框滤波" class="header-anchor">#</a></h3> <pre><code class="hljs lang-py">cv2.boxFilter(输入图像, 图像位深度, 卷积核, normalize=是否归一化)
</code></pre> <ul> <li>图像位深度为 -1 时，表示自适应</li> <li><code>normalize=True</code> 时，与均值滤波一样</li> <li><code>normalize=False</code> 时，不会除以卷积核的大小，因此可能超过 255。超过 255，则为 255</li> </ul> <pre><code class="hljs lang-python">box = cv2.boxFilter(lena_Noise, -<span class="hljs-number">1</span>, (<span class="hljs-number">9</span>, <span class="hljs-number">9</span>), normalize=<span class="hljs-literal">True</span>)

plt_show(lena_Noise, <span class="hljs-string">'原图'</span>, <span class="hljs-number">131</span>)
plt_show(blur, <span class="hljs-string">'均值滤波'</span>, <span class="hljs-number">132</span>)
plt_show(box, <span class="hljs-string">'方框滤波'</span>, <span class="hljs-number">133</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_63_0.svg"></p> <h3 id="高斯滤波" tabindex="-1">高斯滤波<a href="#高斯滤波" class="header-anchor">#</a></h3> <pre><code class="hljs lang-python">aussian = cv2.GaussianBlur(lena_Noise, (<span class="hljs-number">9</span>, <span class="hljs-number">9</span>), <span class="hljs-number">0</span>)
plt_show(lena_Noise, <span class="hljs-string">'原图'</span>, <span class="hljs-number">221</span>)
plt_show(blur, <span class="hljs-string">'均值滤波'</span>, <span class="hljs-number">222</span>)
plt_show(aussian, <span class="hljs-string">'高斯滤波'</span>, <span class="hljs-number">223</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_65_0.svg"></p> <h3 id="中值滤波" tabindex="-1">中值滤波<a href="#中值滤波" class="header-anchor">#</a></h3> <pre><code class="hljs lang-python">median = cv2.medianBlur(lena_Noise, <span class="hljs-number">9</span>)

plt_show(lena_Noise, <span class="hljs-string">'原图'</span>, <span class="hljs-number">221</span>)
plt_show(blur, <span class="hljs-string">'均值滤波'</span>, <span class="hljs-number">222</span>)
plt_show(aussian, <span class="hljs-string">'高斯滤波'</span>, <span class="hljs-number">223</span>)
plt_show(median, <span class="hljs-string">'中值滤波'</span>, <span class="hljs-number">224</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_67_0.svg"></p> <h2 id="canny-边缘检测" tabindex="-1">Canny 边缘检测<a href="#canny-边缘检测" class="header-anchor">#</a></h2> <ol> <li>使用高斯滤波器，以平滑图像，滤除噪声。</li> <li>计算图像中每个像素点的梯度强度和方向。</li> <li>应用非极大值（Non-Maximum Suppression）抑制，以消除边缘检测带来的杂散响应。</li> <li>应用双阈值（Double-Threshold）检测来确定真实的和潜在的边缘。</li> <li>通过抑制孤立的弱边缘最终完成边缘检测。</li> </ol> <h3 id="双阈值检查" tabindex="-1">双阈值检查<a href="#双阈值检查" class="header-anchor">#</a></h3> <p><picture><source srcset="02-OpenCV_files/%E5%8F%8C%E9%98%88%E5%80%BC%E6%A3%80%E6%9F%A5%E7%A4%BA%E6%84%8F%E5%9B%BE.webp" type="image/webp"><img alt="双阈值检查示意图" src="02-OpenCV_files/%E5%8F%8C%E9%98%88%E5%80%BC%E6%A3%80%E6%9F%A5%E7%A4%BA%E6%84%8F%E5%9B%BE.png"></picture></p> <p>梯度值 &gt; maxVal 则为边界<br> minVal &lt; 梯度值 &lt; maxVal 连有边界则保留，否则舍弃<br> 梯度值 &lt; minVal 则舍弃</p> <pre><code class="hljs lang-python">lenacan1 = cv2.Canny(lena, <span class="hljs-number">80</span>, <span class="hljs-number">150</span>)
lenacan2 = cv2.Canny(lena, <span class="hljs-number">50</span>, <span class="hljs-number">100</span>)

plt_show(lena, <span class="hljs-string">'原图'</span>, <span class="hljs-number">131</span>)
plt_show(lenacan1, <span class="hljs-string">'更少的边缘'</span>, <span class="hljs-number">132</span>)
plt_show(lenacan2, <span class="hljs-string">'更多的边缘'</span>, <span class="hljs-number">133</span>)
</code></pre> <p><img alt="svg" src="02-OpenCV_files/02-OpenCV_70_0.svg"></p> </main> <aside id="toc"><nav class="table-of-contents"><ol><li><a href="#last_updatedate-1696414629447">last_update:date: 1696414629447</a></li><li><a href="#导包">导包</a></li><li><a href="#定义图像显示函数">定义图像显示函数</a></li><li><a href="#读取图像">读取图像</a></li><li><a href="#常用方法">常用方法</a><ol><li><a href="#获得图片尺寸">获得图片尺寸</a></li><li><a href="#修改图片尺寸">修改图片尺寸</a></li><li><a href="#显示图片">显示图片</a></li><li><a href="#截取部分图像数据">截取部分图像数据</a></li><li><a href="#颜色通道提取">颜色通道提取</a></li><li><a href="#合并颜色通道">合并颜色通道</a></li><li><a href="#复制图片">复制图片</a></li><li><a href="#删除指定颜色通道">删除指定颜色通道</a></li><li><a href="#边界填充">边界填充</a></li><li><a href="#数值计算">数值计算</a><ol><li><a href="#使用-numpy-进行数值计算">使用 numpy 进行数值计算</a></li><li><a href="#使用-opencv-进行数值计算">使用 OpenCV 进行数值计算</a></li></ol></li><li><a href="#图像阈值">图像阈值</a></li><li><a href="#图片融合">图片融合</a></li><li><a href="#形态学">形态学</a><ol><li><a href="#腐蚀操作">腐蚀操作</a></li><li><a href="#膨胀操作">膨胀操作</a></li><li><a href="#开运算与闭运算">开运算与闭运算</a></li><li><a href="#梯度运算">梯度运算</a></li><li><a href="#礼帽与黑帽">礼帽与黑帽</a></li></ol></li></ol></li><li><a href="#梯度运算-1">梯度运算</a><ol><li><a href="#sobel-算子">Sobel 算子</a></li><li><a href="#scharr-算子">Scharr 算子</a></li><li><a href="#laplacian-算子">Laplacian 算子</a></li></ol></li><li><a href="#图像平滑">图像平滑</a><ol><li><a href="#均值滤波">均值滤波</a></li><li><a href="#方框滤波">方框滤波</a></li><li><a href="#高斯滤波">高斯滤波</a></li><li><a href="#中值滤波">中值滤波</a></li></ol></li><li><a href="#canny-边缘检测">Canny 边缘检测</a><ol><li><a href="#双阈值检查">双阈值检查</a></li></ol></li></ol></nav></aside> </div> <script>function debounce(e,t){let o=null;return function(){clearTimeout(o),o=setTimeout(()=>{e.apply(this,arguments)},t)}}let lightQuery=window.matchMedia("(prefers-color-scheme:light)");function getRandomInt(e,t){e=Math.ceil(e),t=Math.floor(t);return Math.floor(Math.random()*(t-e)+e)}if(lightQuery.addEventListener("change",e=>{localStorage.getItem("theme")||(document.documentElement.dataset.theme=["dark","light"][+e.matches])}),window.matchMedia("(max-width: 960px)").addEventListener("change",e=>{document.querySelector("#content").classList.remove("open")}),localStorage.getItem("theme")?"dark"===localStorage.getItem("theme")&&(document.documentElement.dataset.theme="dark"):document.documentElement.dataset.theme=["dark","light"][+lightQuery.matches],location.hash&&document.querySelector(decodeURIComponent(location.hash)))document.querySelector(decodeURIComponent(location.hash)).scrollIntoView();else{let e=localStorage.getItem("scroll-top-"+location.pathname);e&&(document.querySelector("#main").scrollTop=+e)}document.querySelectorAll(".theme-switch").forEach(e=>e.addEventListener("click",e=>{"dark"===document.documentElement.dataset.theme?(lightQuery.matches?localStorage.removeItem("theme"):localStorage.setItem("theme","light"),document.documentElement.dataset.theme="light"):(lightQuery.matches?localStorage.setItem("theme","dark"):localStorage.removeItem("theme"),document.documentElement.dataset.theme="dark")})),document.querySelector(".random-btn").addEventListener("click",e=>{var t=document.querySelectorAll("#content a");t[getRandomInt(0,t.length)].click()}),document.querySelector("#main").addEventListener("scroll",debounce(e=>{localStorage.setItem("scroll-top-"+location.pathname,e.target.scrollTop)},500)),document.querySelector(".menu-btn").addEventListener("click",()=>{document.querySelector("#content").classList.toggle("open")})</script> <script type="module"> import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
      mermaid.initialize({
        securityLevel: "loose",
        theme: "default",
        startOnLoad: false,
      });
      await mermaid.run({ querySelector: ".mermaid-light" });
      mermaid.initialize({
        securityLevel: "loose",
        theme: "dark",
        startOnLoad: false,
      });
      await mermaid.run({ querySelector: ".mermaid-dark" });
      document
        .querySelectorAll(".mermaid")
        .forEach((e) => e.classList.add("init")); </script> </body></html>